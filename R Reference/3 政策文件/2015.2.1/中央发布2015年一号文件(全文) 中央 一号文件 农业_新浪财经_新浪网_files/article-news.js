/*!
sina.com.cn/license
20141229105427
*/
window.onerror=(function(){var a=function(){return true};if(location.href.indexOf("showerror")==-1){return a}else{return null}})();var $globalInfo=$globalInfo||{};if(typeof $globalInfo.SABLoaded=="undefined"){$globalInfo.SABLoaded=false;var SAB=(function(){var a={};a.E=function(c){if(typeof c==="string"){return document.getElementById(c)}return c};a.C=function(c){c=c.toUpperCase();if(c=="TEXT"){return document.createTextNode("")}if(c=="BUFFER"){return document.createDocumentFragment()}return document.createElement(c)};a.register=function(j,n){var g=0,e=a,h=j.split("."),c=h.length,m=c-1,f;while(g<c){f=h[g];if(g==m){if(e[f]!==undefined){throw h+":: has registered"}e[f]=n(a)}if(e[f]===undefined){e[f]={}}e=e[f];g++}};a.regShort=function(c,e){if(a[c]!==undefined){throw c+":: has registered"}a[c]=e};var b=function(){var c=navigator.userAgent.toLowerCase();this.isIE=/msie/.test(c);this.isOPERA=/opera/.test(c);this.isMOZ=/gecko/.test(c);this.isIE5=/msie 5 /.test(c);this.isIE55=/msie 5.5/.test(c);this.isIE6=/msie 6/.test(c);this.isIE7=/msie 7/.test(c);this.isSAFARI=/safari/.test(c);this.iswinXP=/windows nt 5.1/.test(c);this.iswinVista=/windows nt 6.0/.test(c);this.isFF=/firefox/.test(c);this.isIOS=/\((iPhone|iPad|iPod)/i.test(c)};$globalInfo.ua=new b();return a})()}else{SAB._register=SAB.register;SAB.register=function(a,b){}}SAB.register("dom.ready",function(){var c=[],f=0,a=0,f=0;var b=function(){if(document.readyState==="complete"){return 1}return f};var g=function(h){if(f){return}f=1;if(c){while(c.length){c.shift()()}}c=null};var e=function(){if(a){return}a=1;if(document.readyState==="complete"){g()}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);g()},false);window.addEventListener("load",function(){window.removeEventListener("load",arguments.callee,false);g()},false)}else{document.attachEvent("onreadystatechange",function(){if(document.readyState=="complete"){document.detachEvent("onreadystatechange",arguments.callee);g()}});(function(){if(f){return}var h=new Image;try{h.doScroll();h=null}catch(i){setTimeout(arguments.callee,64);return}g()})()}}};return function(h){e();if(!b()){c.push(h);return}h.call()}});SAB.register("dom.hasClass",function(a){return function(c,b){return c.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))}});SAB.register("dom.addClass",function(a){return function(c,b){if(!a.dom.hasClass(c,b)){c.className+=" "+b}}});SAB.register("dom.removeClass",function(a){return function(e,b){if(a.dom.hasClass(e,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");e.className=e.className.replace(c,"")}}});SAB.register("dom.getScrollPos",function(a){return function(e){e=e||document;var b=e.documentElement;var c=e.body;return[Math.max(b.scrollTop,c.scrollTop),Math.max(b.scrollLeft,c.scrollLeft),Math.max(b.scrollWidth,c.scrollWidth),Math.max(b.scrollHeight,c.scrollHeight)]}});SAB.register("dom.getPosition",function(a){return function(e){var c=0;var b=0;while(e!=null){c+=e.offsetLeft;b+=e.offsetTop;e=e.offsetParent}return{top:b,left:c}}});SAB.register("dom.getStyle",function(b){var a=function(c,g){switch(g){case"opacity":var i=100;try{i=c.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(h){try{i=c.filters("alpha").opacity}catch(h){}}return i/100;case"float":g="styleFloat";default:var f=c.currentStyle?c.currentStyle[g]:null;return(c.style[g]||f)}};if(!$globalInfo.ua.isIE){a=function(c,g){if(g=="float"){g="cssFloat"}try{var f=document.defaultView.getComputedStyle(c,"")}catch(h){traceError(h)}return c.style[g]||f?f[g]:null}}return a});SAB.register("dom.getXY",function(e){var a=e.dom.getStyle;var c=e.dom.getScrollPos;var b=function(g){if((g.parentNode==null||g.offsetParent==null||a(g,"display")=="none")&&g!=document.body){return false}var f=null;var m=[];var h;var i=g.ownerDocument;h=g.getBoundingClientRect();var j=c(g.ownerDocument);return[h.left+j[1],h.top+j[0]];f=g.parentNode;while(f.tagName&&!/^body|html$/i.test(f.tagName)){if(a(f,"display").search(/^inline|table-row.*$/i)){m[0]-=f.scrollLeft;m[1]-=f.scrollTop}f=f.parentNode}return m};if(!$globalInfo.ua.isIE){b=function(h){if((h.parentNode==null||h.offsetParent==null||a(h,"display")=="none")&&h!=document.body){return false}var f=null;var n=[];var i;var j=h.ownerDocument;var g=$globalInfo.ua.isSAFARI;n=[h.offsetLeft,h.offsetTop];f=h.offsetParent;var m=a(h,"position")=="absolute";if(f!=h){while(f){n[0]+=f.offsetLeft;n[1]+=f.offsetTop;if(g&&!m&&a(f,"position")=="absolute"){m=true}f=f.offsetParent}}if(g&&m){n[0]-=h.ownerDocument.body.offsetLeft;n[1]-=h.ownerDocument.body.offsetTop}f=h.parentNode;while(f.tagName&&!/^body|html$/i.test(f.tagName)){if(a(f,"display").search(/^inline|table-row.*$/i)){n[0]-=f.scrollLeft;n[1]-=f.scrollTop}f=f.parentNode}return n}}return b});SAB.register("dom.isNode",function(a){return function(b){return !!((b!=undefined)&&b.nodeName&&b.nodeType)}});SAB.register("str.trim",function(a){return function(b){return b.replace(/(^[\s\u3000]*)|([\s\u3000]*$)/g,"")}});SAB.register("str.encodeDoubleByte",function(a){return function(b){if(typeof b!="string"){return b}return encodeURIComponent(b)}});SAB.register("str.encodeHTML",function(a){return function(c){var b="";var e=document.createElement("div");e.appendChild(document.createTextNode(c));b=e.innerHTML;e=null;b=b.replace(/(&lt;br\/&gt;){1,}/ig,"<br/>");b=b.replace(/\s/g,"&nbsp;");return b}});SAB.register("str.byteLength",function(a){return function(c){if(typeof c=="undefined"){return 0}var b=c.match(/[^\x00-\x80]/g);return(c.length+(!b?0:b.length))}});SAB.register("arr.indexOf",function(a){return function(e,f){if(f.indexOf){return f.indexOf(e)}var c=0,b=f.length;while(c<b){if(f[c]===e){return c}c++}return -1}});SAB.register("arr.inArray",function(a){return function(b,c){return a.arr.indexOf(b,c)>-1}});SAB.register("arr.foreach",function(a){return function(h,e){if(!a.arr.isArray(h)){throw"the foreach function needs an array as first parameter"}var g=0,c=h.length,f=[];while(g<c){var b=e(h[g],g);if(b===false){break}if(b!==null){f[g]=b}g++}return f}});SAB.register("arr.isArray",function(a){return function(b){return Object.prototype.toString.call(b)==="[object Array]"}});SAB.register("obj.isEmpty",function(a){return function(f,e){var c=true;for(var b in f){if(e){c=false;break}else{if(f.hasOwnProperty(b)){c=false;break}}}return c}});SAB.register("obj.extend",function(a){return function(e,c){for(var b in c){e[b]=c[b]}return e}});SAB.register("json.jsonToQuery",function(a){var b=function(e,c){e=e==null?"":e;e=a.trim(e.toString());if(c){return encodeURIComponent(e)}else{return e}};return function(h,f){var j=[];if(typeof h=="object"){for(var e in h){if(h[e] instanceof Array){for(var g=0,c=h[e].length;g<c;g++){j.push(e+"="+b(h[e][g],f))}}else{if(typeof h[e]!="function"){j.push(e+"="+b(h[e],f))}}}}if(j.length){return j.join("&")}else{return""}}});SAB.register("json.queryToJson",function(a){return function(c,h){var g=a.str.trim(c).split("&");var e={};var j=function(i){if(h){try{return decodeURIComponent(i)}catch(m){return i}}else{return i}};for(var f=0,b=g.length;f<b;f++){if(g[f]){_hsh=g[f].split("=");_key=_hsh[0];_value=_hsh[1];if(_hsh.length<2){_value=_key;_key="$nullName"}if(!e[_key]){e[_key]=j(_value)}else{if(a.arr.isArray(e[_key])!=true){e[_key]=[e[_key]]}e[_key].push(j(_value))}}}return e}});SAB.register("evt.addEvent",function(a){return function(h,f,e,b){var g=a.dom.byId(h);if(g==null){throw new Error("addEvent 找不到对象："+h);return}if(typeof b=="undefined"){b=false}if(typeof f=="undefined"){f="click"}if(g.addEventListener){g.addEventListener(f,e,b);return true}else{if(g.attachEvent){var c=g.attachEvent("on"+f,e);return true}else{g["on"+f]=e}}}});SAB.register("evt.removeEvent",function(a){return function(b,e,c){var f=a.dom.byId(b);if(f==null){throw ("removeEvent 找不到对象："+b);return}if(typeof c!="function"){return}if(typeof e=="undefined"){e="click"}if(f.addEventListener){f.removeEventListener(e,c,false)}else{if(f.attachEvent){f.detachEvent("on"+e,c)}}c[e]=null}});SAB.register("evt.fixEvent",function(a){return fixEvent=function(b){if(typeof b=="undefined"){b=window.event}if(!b.target){b.target=b.srcElement;b.pageX=b.x;b.pageY=b.y}if(typeof b.layerX=="undefined"){b.layerX=b.offsetX}if(typeof b.layerY=="undefined"){b.layerY=b.offsetY}return b}});SAB.register("evt.preventDefault",function(a){return function(b){var b=b||window.event;if($globalInfo.ua.isIE){b.returnValue=false}else{b.preventDefault()}}});SAB.register("dom.byId",function(a){return function(b){if(typeof b==="string"){return document.getElementById(b)}else{return b}}});SAB.register("dom.byClass",function(a){return function(j,e,c){e=e||document;e=typeof e=="string"?a.dom.byId(e):e;c=c||"*";var f=[];j=" "+j+" ";var n=e.getElementsByTagName(c),h=n.length;for(var g=0;g<h;++g){var b=n[g];if(b.nodeType==1){var m=" "+b.className+" ";if(m.indexOf(j)!=-1){f[f.length]=b}}}return f}});SAB.register("dom.byAttr",function(a){return function(j,c,m){var e=[];m=m||"";var h=function(i){return i.getAttribute(c)};for(var g=0,b=j.childNodes.length;g<b;g++){if(j.childNodes[g].nodeType==1){var f=false;if(m){f=(h(j.childNodes[g])==m)}else{f=(h(j.childNodes[g])!="")}if(f){e.push(j.childNodes[g])}if(j.childNodes[g].childNodes.length>0){e=e.concat(arguments.callee.call(null,j.childNodes[g],c,m))}}}return e}});SAB.register("dom.builder",function(b){var a=b.dom.byAttr;return function(m,h){var n,e;e=a(m,h);n={};for(var g=0,c=e.length;g<c;g++){var f=e[g].getAttribute(h);if(!f){continue}n[f]||(n[f]=[]);n[f].push(e[g])}return{box:m,list:n}}});SAB.register("dom.contains",function(a){return function(b,c){if(b.compareDocumentPosition){return b===c||!!(b.compareDocumentPosition(c)&16)}if(b.contains&&c.nodeType===1){return b.contains(c)&&b!==c}while((c=c.parentNode)){if(c===b){return true}}return false}});SAB.register("evt.custEvent",function(c){var a="__custEventKey__",e=1,f={},b=function(i,h){var g=(typeof i=="number")?i:i[a];return(g&&f[g])&&{obj:(typeof h=="string"?f[g][h]:f[g]),key:g}};return{define:function(n,j){if(n&&j){var h=(typeof n=="number")?n:n[a]||(n[a]=e++),m=f[h]||(f[h]={});j=[].concat(j);for(var g=0;g<j.length;g++){m[j[g]]||(m[j[g]]=[])}return h}},undefine:function(i,h){if(i){var g=(typeof i=="number")?i:i[a];if(g&&f[g]){if(typeof h=="string"){if(h in f[g]){delete f[g][h]}}else{delete f[g]}}}},add:function(m,h,g,i){if(m&&typeof h=="string"&&g){var j=b(m,h);if(!j||!j.obj){throw"custEvent ("+h+") is undefined !"}j.obj.push({fn:g,data:i});return j.key}},remove:function(n,j,h){if(n){var m=b(n,j),o;if(m&&(o=m.obj)){if(c.arr.isArray(o)){if(h){for(var g=0;g<o.length&&o[g].fn!==h;g++){}o.splice(g,1)}else{o.splice(0)}}else{for(var g in o){o[g]=[]}}return m.key}}},fire:function(o,m,g){if(o&&typeof m=="string"){var n=b(o,m),p;if(n&&(p=n.obj)){if(!c.arr.isArray(g)){g=g!=undefined?[g]:[]}for(var h=0;h<p.length;h++){var j=p[h].fn;if(j&&j.apply){j.apply(c,[{type:m,data:p[h].data}].concat(g))}}return n.key}}},destroy:function(){f={};e=1}}});SAB.register("evt.delegatedEvent",function(b){var a=function(g,f){for(var e=0,c=g.length;e<c;e+=1){if(b.dom.contains(g[e],f)){return true}}return false};return function(e,h){if(!b.dom.isNode(e)){throw"SAB.evt.delegatedEvent need an Element as first Parameter"}if(!h){h=[]}if(b.arr.isArray(h)){h=[h]}var c={};var g=function(p){var j=b.evt.fixEvent(p);var o=j.target;var n=p.type;if(a(h,o)){return false}else{if(!b.dom.contains(e,o)){return false}else{var m=null;var i=function(){if(c[n]&&c[n][m]){return c[n][m]({evt:j,el:o,e:p,data:b.json.queryToJson(o.getAttribute("action-data")||"")})}else{return true}};while(o&&o!==e){if(!o.getAttribute){break}m=o.getAttribute("action-type");if(i()===false){break}o=o.parentNode}}}};var f={};f.add=function(m,n,j){if(!c[n]){c[n]={};b.evt.addEvent(e,n,g)}var i=c[n];i[m]=j};f.remove=function(i,j){if(c[j]){delete c[j][i];if(b.obj.isEmpty(c[j])){delete c[j];b.evt.removeEvent(e,g,j)}}};f.pushExcept=function(i){h.push(i)};f.removeExcept=function(n){if(!n){h=[]}else{for(var m=0,j=h.length;m<j;m+=1){if(h[m]===n){h.splice(m,1)}}}};f.clearExcept=function(i){h=[]};f.destroy=function(){for(k in c){for(l in c[k]){delete c[k][l]}delete c[k];b.evt.removeEvent(e,g,k)}};return f}});SAB.register("fun.bind2",function(a){Function.prototype.bind2=function(c){var b=this;return function(){return b.apply(c,arguments)}};return function(e,c){var b=e;return function(){return b.apply(c,arguments)}}});SAB.register("io.jsonp",function($){return function(url,params,callback,fix){var byId=$.dom.byId;var idStr=url+"&"+params;var fun="";if(byId(url)){document.body.removeChild(byId(url))}fix=fix||false;if(!fix){url=url+((url.indexOf("?")==-1)?"?":"&")+"_t="+Math.random();if(typeof callback=="function"){fun="fun_"+new Date().getUTCMilliseconds()+(""+Math.random()).substring(3);eval(fun+"=function(res){callback(res)}")}}else{if(typeof callback=="string"){fun=callback}}url=url+"&callback="+fun;url=url+"&"+params;var head_dom=document.getElementsByTagName("head")[0];var old_script=byId(idStr);if(old_script){head_dom.removeChild(old_script)}var script_dom=$.C("script");script_dom.src=url;script_dom.id=idStr;script_dom.type="text/javascript";script_dom.language="javascript";head_dom.appendChild(script_dom)}});SAB.register("io.ajax",function($){return{createRequest:function(){var request=null;try{request=new XMLHttpRequest()}catch(trymicrosoft){try{request=new ActiveXObject("Msxml2.XMLHTTP")}catch(othermicrosoft){try{request=ActiveXObject("Microsoft.XMLHTTP")}catch(failed){}}}if(request==null){throw ("<b>create request failed</b>",{html:true})}else{return request}},request:function(url,option){option=option||{};option.onComplete=option.onComplete||function(){};option.onException=option.onException||function(){};option.onTimeout=option.onTimeout||function(){};option.timeout=option.timeout?option.timeout:-1;option.returnType=option.returnType||"txt";option.method=option.method||"get";option.data=option.data||{};if(typeof option.GET!="undefined"&&typeof option.GET.url_random!="undefined"&&option.GET.url_random==0){this.rand=false;option.GET.url_random=null}this.loadData(url,option)},loadData:function(url,option){var request=this.createRequest(),tmpArr=[];var _url=new $.util.url(url);var timer;if(option.POST){for(var postkey in option.POST){var postvalue=option.POST[postkey];if(postvalue!=null){tmpArr.push(postkey+"="+$.str.encodeDoubleByte(postvalue))}}}var sParameter=tmpArr.join("&")||"";if(option.GET){for(var key in option.GET){if(key!="url_random"){_url.setParam(key,$.str.encodeDoubleByte(option.GET[key]))}}}if(this.rand!=false){_url.setParam("rnd",Math.random())}if(option.timeout>-1){timer=setTimeout(option.onTimeout,option.timeout)}request.onreadystatechange=function(){if(request.readyState==4){var response,type=option.returnType;try{switch(type){case"txt":response=request.responseText;break;case"xml":if(Core.Base.detect.$IE){response=request.responseXML}else{var Dparser=new DOMParser();response=Dparser.parseFromString(request.responseText,"text/xml")}break;case"json":response=eval("("+request.responseText+")");break}option.onComplete(response);clearTimeout(timer)}catch(e){option.onException(e.message,_url);return false}}};try{if(option.POST){request.open("POST",_url,true);request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");request.send(sParameter)}else{request.open("GET",_url,true);request.send(null)}}catch(e){option.onException(e.message,_url);return false}}}});SAB.register("io.ijax",function(a){return{arrTaskLists:[],createLoadingIframe:function(){if(this.loadFrames!=null){return false}var f="loadingIframe_thread"+Math.ceil(Math.random()*10000);var e="loadingIframe_thread"+Math.ceil((Math.random()+1)*10000);this.loadFrames=[f,e];var h="";if($globalInfo.ua.isIE6){h="javascript:void((function(){document.open();document.domain='sina.com.cn';document.close()})())"}var c='<iframe id="'+f+'" name="'+f+'" class="invisible"			              scrolling="no" src=""			              allowTransparency="true" style="display:none;" frameborder="0"			              ></iframe>						  <iframe id="'+e+'" name="'+e+'" class="invisible"			              scrolling="no" src="'+h+'"			              allowTransparency="true" style="display:none;" frameborder="0"			              ></iframe>';var b=a.C("div");b.id="ijax_iframes";b.innerHTML=c;document.body.appendChild(b);var g=setInterval(a.fun.bind2(function(){if(a.E(this.loadFrames[0])!=null&&a.E(this.loadFrames[1])!=null){clearInterval(g);g=null;this.loadingIframe={thread1:{container:a.E(this.loadFrames[0]),isBusy:false},thread2:{container:a.E(this.loadFrames[1]),isBusy:false}};this.loadByList()}},this),10)},isIjaxReady:function(){if(typeof this.loadingIframe=="undefined"){return false}for(var b in this.loadingIframe){if(this.loadingIframe[b].isBusy==false){this.loadingIframe[b].isBusy=true;return this.loadingIframe[b]}}return false},request:function(b,e){var c={};c.url=b;c.option=e||{};this.arrTaskLists.push(c);if(this.loadFrames==null){this.createLoadingIframe()}else{this.loadByList()}},loadByList:function(){if(this.arrTaskLists.length==0){return false}var b=this.isIjaxReady();if(b==false){return false}var c=this.arrTaskLists[0];this.loadData(c.url,c.option,b);this.arrTaskLists.shift()},loadData:function(c,g,n){var f=new a.util.url(c);if(g.GET){for(var o in g.GET){f.setParam(o,Core.String.encodeDoubleByte(g.GET[o]))}}f=f.toString();var j=n.container;j.listener=a.fun.bind2(function(){if(g.onComplete||g.onException){try{var p=j.contentWindow.document,q;var r=p.getElementsByTagName("textarea")[0];if(typeof r!="undefined"){q=r.value}else{q=p.body.innerHTML}if(g.onComplete){g.onComplete(q)}else{g.onException()}}catch(s){if(g.onException){g.onException(s.message,f.toString())}}}n.isBusy=false;a.evt.removeEvent(j,"load",j.listener);this.loadByList()},this);a.evt.addEvent(j,"load",j.listener);if(g.POST){var b=a.C("form");b.id="IjaxForm";b.action=f;b.method="post";b.target=j.id;for(var m in g.POST){var i=a.C("input");i.type="hidden";i.name=m;i.value=g.POST[m];b.appendChild(i)}document.body.appendChild(b);try{b.submit()}catch(h){}}else{try{window.frames(j.id).location.href=f}catch(h){j.src=f}}}}});SAB.register("io.jsload",function(a){JsLoad={};(function(){function b(n,h){c(n,h);var m=n.urls;var g,f=m.length;for(g=0;g<f;g++){var j=a.C("script");j.src=m[g].url;j[document.all?"onreadystatechange":"onload"]=function(){var i=this.readyState||"undefined";if(/gecko/.test(navigator.userAgent.toLowerCase())||i.toLowerCase()=="complete"||i.toLowerCase()=="loaded"){h.script_loaded_num++}};document.getElementsByTagName("head")[0].appendChild(j)}}function c(p,h){var n=p.urls;var r=p.GET;var j,m=n.length;var q,f,o,g;for(j=0;j<m;j++){g=parseInt(Math.random()*100000000);f=new a.util.url(n[j].url);for(q in r){if(p.noencode==true){f.setParam(q,r[q])}else{f.setParam(q,a.str.encodeDoubleByte(r[q]))}}o=f.getParam("jsvar")||"requestId_"+g;if(p.noreturn!=true){f.setParam("jsvar",o)}h.script_var_arr.push(o);n[j].url=f.toString();n[j].charset=n[j].charset||p.charset}}function e(h,i){var g={urls:[],charset:"utf-8",noreturn:false,noencode:true,timeout:-1,POST:{},GET:{},onComplete:null,onException:null};var f={script_loaded_num:0,is_timeout:false,is_loadcomplete:false,script_var_arr:[]};g.urls=typeof h=="string"?[{url:h}]:h;a.util.parseParam(g,i);b(g,f);(function(){if(g.noreturn==true&&g.onComplete==null){return}var j,m=[];if(f.script_loaded_num==g.urls.length){f.is_loadcomplete=true;if(g.onComplete!=null){for(j=0;j<f.script_var_arr.length;j++){m.push(window[f.script_var_arr[j]])}if(f.script_var_arr.length<2){g.onComplete(m[0])}else{g.onComplete(m)}}return}if(f.is_timeout==true){return}setTimeout(arguments.callee,50)})();if(g.timeout>0){setTimeout(function(){if(f.is_loadcomplete!=true){if(g.onException!=null){g.onException()}f.is_timeout=true}},g.timeout)}}JsLoad.request=function(f,g){new e(f,g)}})();return JsLoad});SAB.register("io.html5Ijax",function(g){var h=g.evt.addEvent,e=g.evt.removeEvent,b=function(){},f=/^http\s?\:\/\/[a-z\d\-\.]+/i,c="ijax-html5-iframe-",a=function(i){i=i||{};this.init(i)};a.prototype={ready:false,init:function(p){if(this.ready){return}var t=this,q,r,m,n,i,s=p.proxyUrl,o={};t.onsuccess=p.onsuccess||b;t.onfailure=p.onfailure||b;if(!s){return}i=function(v){if(!t.ready||v.origin!==t.target){t.destroy();return}var u=v.data;if(!u||u==="failure"){t.destroy();t.onfailure&&t.onfailure()}else{t.onsuccess&&t.onsuccess(v.data);t.destroy()}};h(window,"message",i);q=c+Date.parse(new Date());r='<iframe id="'+q+'" name="'+q+'" src="'+s+'" frameborder="0" style="width:0;height:0;display:none;"></iframe>';var j=g.C("div");j.id=c+"iframes";j.innerHTML=r;m=j.childNodes[0];n=function(){t.ready=true;var v=m.src,u=v.match(f);t.target=(u&&u[0])||"*"};h(m,"load",n);document.body.insertBefore(m,document.body.firstChild);t._iframe=m;t._iframeLoaded=n;t._receiver=i},send:function(j){j=j||{};var m=this,n=j.url,p=j.data,i=j.onsuccess,o=j.onfailure;if(!n||typeof n!=="string"){return}if(i){m.onsuccess=i}if(o){m.onfailure=o}if(!m.ready){setTimeout(function(){m.send(j)},50);return}if(p){p+="&_url="+window.encodeURIComponent(n)}else{p="_url="+window.encodeURIComponent(n)}m._iframe.contentWindow.postMessage(p,m.target)},destroy:function(){var i=this._iframe;e(i,"load",this._iframeLoaded);i.parentNode.removeChild(i);e(window,"message",this._receiver);this._iframe=null;this._iframeLoaded=null;this._receiver=null}};return a});SAB.register("clz.extend",function(a){return function(f,e,b){for(var c in e){f[c]=e[c]}return f}});SAB.register("util.cookie",function(a){var b={};b.getCookie=function(c){c=c.replace(/([\.\[\]\$])/g,"\\$1");var f=new RegExp(c+"=([^;]*)?;","i");var g=document.cookie+";";var e=g.match(f);if(e){return e[1]||""}else{return""}};b.setCookie=function(e,i,f,n,h,c){var j=[];j.push(e+"="+escape(i));if(f){var m=new Date();var g=m.getTime()+f*3600000;m.setTime(g);j.push("expires="+m.toGMTString())}if(n){j.push("path="+n)}if(h){j.push("domain="+h)}if(c){j.push(c)}document.cookie=j.join(";")};b.deleteCookie=function(c){document.cookie=c+"=;expires=Fri, 31 Dec 1999 23:59:59 GMT;"};return b});SAB.register("util.parseParam",function(a){return function(c,b){var e;try{if(typeof b!="undefined"){for(e in c){if(b[e]!=null){c[e]=b[e]}}}}finally{e=null;return c}}});SAB.register("util.byteLength",function(a){return function(c){if(typeof c=="undefined"){return 0}var b=c.match(/[^\x00-\x80]/g);return(c.length+(!b?0:b.length))}});SAB.register("util.url",function(a){Url=function(b){b=b||"";this.url=b;this.query={};this.parse()};Url.prototype={parse:function(b){if(b){this.url=b}this.parseAnchor();this.parseParam()},parseAnchor:function(){var b=this.url.match(/\#(.*)/);b=b?b[1]:null;this._anchor=b;if(b!=null){this.anchor=this.getNameValuePair(b);this.url=this.url.replace(/\#.*/,"")}},parseParam:function(){var b=this.url.match(/\?([^\?]*)/);b=b?b[1]:null;if(b!=null){this.url=this.url.replace(/\?([^\?]*)/,"");this.query=this.getNameValuePair(b)}},getNameValuePair:function(c){var b={};c.replace(/([^&=]*)(?:\=([^&]*))?/gim,function(e,g,f){if(g==""){return}b[g]=f||""});return b},getParam:function(b){return this.query[b]||""},clearParam:function(){this.query={}},setParam:function(b,c){if(b==null||b==""||typeof(b)!="string"){throw new Error("no param name set")}this.query=this.query||{};this.query[b]=c},setParams:function(b){this.query=b},serialize:function(e){var b=[];for(var c in e){if(e[c]==null||e[c]==""){b.push(c+"=")}else{b.push(c+"="+e[c])}}return b.join("&")},toString:function(){var b=this.serialize(this.query);return this.url+(b.length>0?"?"+b:"")+(this.anchor?"#"+this.serialize(this.anchor):"")},getHashStr:function(b){return this.anchor?"#"+this.serialize(this.anchor):(b?"#":"")}};return Url});SAB.register("util.template",function(a){return function(c,e,b){return c.replace(/#\{(.+?)\}/ig,function(){var j=arguments[1].replace(/\s/ig,"");var g=arguments[0];var m=j.split("||");for(var h=0,f=m.length;h<f;h+=1){if(/^default:.*$/.test(m[h])){g=b?decodeURIComponent(m[h].replace(/^default:/,"")):m[h].replace(/^default:/,"");break}else{if(e[m[h]]!==undefined){g=b?decodeURIComponent(e[m[h]]):e[m[h]];break}}}return g})}});SAB.register("app.log",function(b){var a=true;return function(){if(!a){return}if(typeof console=="undefined"){return}var g=Array.prototype.slice;var c=g.call(arguments,0);c.unshift("* SAB.app.log >>>>>>");try{console.log.apply(console,c)}catch(f){console.log(c)}}});SAB.register("app.strLeft",function(a){return function(p,b){var o="...";var m=p.slice(0,b),f=m.replace(/[^\x00-\xff]/g,"**").length,e=p.length,c=m.length;if(f<b){return m}else{if(f==b){if(b==e||c==e){return m}else{return p.slice(0,b-2)+o}}}f-=m.length;switch(f){case 0:return m;case b:var g;if(b==e){g=p.slice(0,(b>>1)-1);return g+o}else{g=p.slice(0,b>>1);return g}default:var c=b-f,h=p.slice(c,b),e=h.replace(/[\x00-\xff]/g,"").length;return e?p.slice(0,c)+arguments.callee(h,e):p.slice(0,c)}}});SAB.register("app.strLeft2",function(a){var b=a.util.byteLength;return function(f,c){var e=f.replace(/\*/g," ").replace(/[^\x00-\xff]/g,"**");f=f.slice(0,e.slice(0,c).replace(/\*\*/g," ").replace(/\*/g,"").length);if(b(f)>c){f=f.slice(0,f.length-1)}return f}});SAB.register("app.splitNum",function(a){return function(b){b=b+"";var c=/(-?\d+)(\d{3})/;while(c.test(b)){b=b.replace(c,"$1,$2")}return b}});SAB.register("app.placeholder",function(a){$globalInfo.supportPlaceholder="placeholder" in document.createElement("input");return function(b){function f(h){if($globalInfo.supportPlaceholder){return}var g=h.getAttribute("hasPlaceholder")||0;if(g=="1"){return}var o=function(){defaultValue=h.defaultValue;if(h.value==""){a.dom.addClass(h,"gray");h.value=m}h.onfocus=function(){if(h.value===defaultValue||h.value===m){this.value="";a.dom.removeClass(h,"gray")}};h.onblur=function(){if(h.value===""){this.value=m;a.dom.addClass(h,"gray")}}};var n=function(){var p=a.C("input");p.type="text";p.className="pwd_placeholder gray "+h.className;p.value=m;p.autocomplete="off";h.style.display="none";h.parentNode.appendChild(p);p.onfocus=function(){p.style.display="none";h.style.display="";h.focus()};h.onblur=function(){if(h.value===""){p.style.display="";h.style.display="none"}}};var m=h.getAttribute("placeholder");if(!m){if(h.attributes&&h.attributes.placeholder){m=h.attributes.placeholder.value}}var i=h.tagName;if(i=="INPUT"){var j=h.type;if(j=="password"&&m){n()}else{if(j=="text"&&m){o()}}}else{if(i=="TEXTAREA"){o()}}h.setAttribute("hasPlaceholder","1")}for(var e=b.length-1;e>=0;e--){var c=b[e];f(c)}}});SAB.register("app.anchorGo",function(a){return function(c,h,i,b,g){h=h||800;b=b||1;var f=c.href.split("#")[1];dest=a.dom.byId(f);i=i||0;switch(b||1){case 1:var j=window.jQuery?(parseInt(dest?jQuery(dest).offset().top:0)+i):(parseInt(dest?dest.offsetTop:0)+i);if(!$globalInfo.ua.isIE6&&window.jQuery){jQuery("body,html").animate({scrollTop:j},h)}else{document.documentElement.scrollTop=j;document.body.scrollTop=j}break;case 2:var j=window.jQuery?(parseInt(dest?jQuery(dest).offset().left:0)+i):(parseInt(dest?dest.offsetLeft:0)+i);if(!$globalInfo.ua.isIE6&&window.jQuery){jQuery("body,html").animate({scrollLeft:j},h)}else{document.documentElement.scrollLeft=j;document.body.scrollLeft=j}break;default:return}a.evt.preventDefault(g);return false}});SAB.register("util.timer",function(a){return new function(){this.list={};this.refNum=0;this.clock=null;this.allpause=false;this.delay=25;this.add=function(b){if(typeof b!="function"){throw ("The timer needs add a function as a parameters")}var c=""+(new Date()).getTime()+(Math.random())*Math.pow(10,17);this.list[c]={fun:b,pause:false};if(this.refNum<=0){this.start()}this.refNum++;return c};this.remove=function(b){if(this.list[b]){delete this.list[b];this.refNum--}if(this.refNum<=0){this.stop()}};this.pause=function(b){if(this.list[b]){this.list[b]["pause"]=true}};this.play=function(b){if(this.list[b]){this.list[b]["pause"]=false}};this.stop=function(){clearInterval(this.clock);this.clock=null};this.start=function(){var b=this;this.clock=setInterval(function(){b.loop.apply(b)},this.delay)};this.loop=function(){for(var b in this.list){if(!this.list[b]["pause"]){this.list[b]["fun"]()}}}}});SAB.register("util.throttle",function(a){return function(c,b){clearTimeout(c.__tId__);c.__tId__=setTimeout(function(){c.call(b)},100)}});SAB.register("util.reachBottom",function(f){var g=document.documentElement;var e=document.body;var c=Math.min;var a=Math.max;var b=function(){var m=0;var h=0;var i=0;try{if(g&&g.scrollTop){m=g.scrollTop}else{if(e){m=e.scrollTop}}if(e.clientHeight&&g.clientHeight){h=c(e.clientHeight,g.clientHeight)}else{h=a(e.clientHeight,g.clientHeight)}i=a(e.scrollHeight,g.scrollHeight);return(m+h>i-150)}catch(j){return false}};return b});SAB.register("util.timeoutHandle",function(c){var a=[];var b={success:function(f){var e=a[f];if(!e){return}e.isSuccess=true;clearTimeout(e.timer)},timeout:function(g,f){var e=a[g];if(!e){return}e.timer=setTimeout(function(){if(e.isSuccess){return}if(typeof f=="function"){f.call(this)}},e.time)}};return function(g,e,f){if(a[g]){throw new Error(g+"已经被占用")}a[g]={};a[g].time=f||5000;a[g].isSuccess=false;if(typeof e=="function"){e.call(this,b)}}});SAB.register("app.shine",function(c){var e=c.util.timer;var a=function(b){return b.slice(0,b.length-1).concat(b.concat([]).reverse())};return function(A,z){var y=c.util.parseParam({start:"#fff",color:"#fbb",times:2,step:5,length:4},z),x=y.start.split(""),w=y.color.split(""),v=[];for(var u=0;u<y.step;u+=1){var t=x[0];for(var s=1;s<y.length;s+=1){var r=parseInt(x[s],16),q=parseInt(w[s],16);t+=Math.floor(parseInt(r+(q-r)*u/y.step,10)).toString(16)}v.push(t)}for(var u=0;u<y.times;u+=1){v=a(v)}var p=!1,b=e.add(function(){if(!v.length){e.remove(b)}else{if(p){p=!1;return}p=!0;A.style.backgroundColor=v.pop()}})}});SAB.register("job.cmntConfig",function(h){var i=h.clz.extend;var e=this.url=new h.util.url(location.href);var g=e.query||{};var a={"哈哈":"haha","偷笑":"tx","泪":"lei","嘻嘻":"xixi","爱你":"aini","挖鼻屎":"wbs","心":"xin"};var c={"国旗":"dc/flag_thumb","走你":"ed/zouni_thumb","笑哈哈":"32/lxhwahaha_thumb","江南style":"67/gangnamstyle_thumb","吐血":"8c/lxhtuxue_thumb","好激动":"ae/lxhjidong_thumb","lt切克闹":"73/ltqiekenao_thumb","moc转发":"cb/moczhuanfa_thumb","ala蹦":"b7/alabeng_thumb","gst耐你":"1b/gstnaini_thumb","xb压力":"e0/xbyali_thumb","din推撞":"dd/dintuizhuang_thumb","草泥马":"7a/shenshou_thumb","神马":"60/horse2_thumb","浮云":"bc/fuyun_thumb","给力":"c9/geili_thumb","围观":"f2/wg_thumb","威武":"70/vw_thumb","熊猫":"6e/panda_thumb","兔子":"81/rabbit_thumb","奥特曼":"bc/otm_thumb","?":"15/j_thumb","互粉":"89/hufen_thumb","礼物":"c4/liwu_thumb","呵呵":"ac/smilea_thumb","嘻嘻":"0b/tootha_thumb","哈哈":"6a/laugh","可爱":"14/tza_thumb","可怜":"af/kl_thumb","挖鼻屎":"a0/kbsa_thumb","吃惊":"f4/cj_thumb","害羞":"6e/shamea_thumb","挤眼":"c3/zy_thumb","闭嘴":"29/bz_thumb","鄙视":"71/bs2_thumb","爱你":"6d/lovea_thumb","泪":"9d/sada_thumb","偷笑":"19/heia_thumb","亲亲":"8f/qq_thumb","生病":"b6/sb_thumb","太开心":"58/mb_thumb","懒得理你":"17/ldln_thumb","右哼哼":"98/yhh_thumb","左哼哼":"6d/zhh_thumb","嘘":"a6/x_thumb","衰":"af/cry","委屈":"73/wq_thumb","吐":"9e/t_thumb","打哈欠":"f3/k_thumb","抱抱":"27/bba_thumb","怒":"7c/angrya_thumb","疑问":"5c/yw_thumb","馋嘴":"a5/cza_thumb","拜拜":"70/88_thumb","思考":"e9/sk_thumb","汗":"24/sweata_thumb","困":"7f/sleepya_thumb","睡觉":"6b/sleepa_thumb","钱":"90/money_thumb","失望":"0c/sw_thumb","酷":"40/cool_thumb","花心":"8c/hsa_thumb","哼":"49/hatea_thumb","鼓掌":"36/gza_thumb","晕":"d9/dizzya_thumb","悲伤":"1a/bs_thumb","抓狂":"62/crazya_thumb","黑线":"91/h_thumb","阴险":"6d/yx_thumb","怒骂":"89/nm_thumb","心":"40/hearta_thumb","伤心":"ea/unheart","猪头":"58/pig",ok:"d6/ok_thumb","耶":"d9/ye_thumb",good:"d8/good_thumb","不要":"c7/no_thumb","赞":"d0/z2_thumb","来":"40/come_thumb","弱":"d8/sad_thumb","蜡烛":"91/lazu_thumb","蛋糕":"6a/cake","钟":"d3/clock_thumb","话筒":"1b/m_thumb"};var b=(function(){var j=/slide\..*?.sina.com.cn/;return j.test(location.host)?"slide":""})();var f={video_url:"",pic_url:"",channel:"ty",newsid:"6-12-6341970",group:0,encoding:"gbk",hideCMNTList:0,source:"新浪娱乐",sourceUrl:"http://ent.sina.com.cn/",uid:"1642591402",style:0,channelId:28,isBBS:0,pageType:b,pageSize:100,pageNum:10,hotPageNum:10,commonFaces:a,commonFacesBase:"http://i3.sinaimg.cn/dy/deco/2012/1217/face/",allFaces:c,allFacesBase:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/",postPlaceholder:"请输入评论内容",postContent:"",hideFaces:0,hideCount:0,formPosition:"top",cmntFix:1,maxFloor:10,hideHead:0,autoLogin:0,autoLoginInterval:8000,info_type:0,scrollLoad:0,synLayerLoginStatus:0};ARTICLE_DATA=typeof ARTICLE_DATA!="undefined"?ARTICLE_DATA:{};ARTICLE_DATA=i(f,ARTICLE_DATA,true);ARTICLE_DATA=i(ARTICLE_DATA,g,true);if(ARTICLE_DATA.formPosition!=="top"){ARTICLE_DATA.cmntFix=0}});SAB.register("app.setWeiboUserInfo",function(a){return function(e){var c=e.result.data;if(c){$globalInfo.isWeiboLogin=true;$globalInfo.weiboData=c;$globalInfo.weiboName=c.name;$globalInfo.weiboNick=c.screen_name;$globalInfo.weiboUser=c;$globalInfo.profile_image_url=c.profile_image_url;var b=a.evt.custEvent;b.fire(a,"ce_weiboLogin")}else{$globalInfo.isWeiboLogin=false}}});SAB.register("app.setSinaUserInfo",function(a){return function(){var e=sinaSSOController.getSinaCookie();if(e){$globalInfo.isLogin=true;$globalInfo.uid=e.uid;$globalInfo.name=e.name;$globalInfo.sinaNick=e.nick;$globalInfo.sinaUser=e;var c=a.evt.custEvent;var b=a.app.login}else{$globalInfo.isLogin=false;$globalInfo.isWeiboLogin=false}window.$globalInfo=$globalInfo}});SAB.register("app.logout",function(a){return function(){sinaSSOController.logout()}});SAB.register("app.login",function(a){return function(c,b,e){sinaSSOController.login(c,b,e)}});SAB.register("app.autoLogin",function(a){return function(){var c=a.evt.custEvent;var b=sinaSSOController.getSinaCookie();if(b&&$globalInfo.isLogin){return}var c=a.evt.custEvent;c.fire(a,"ce_logout");a.app.setSinaUserInfo();sinaSSOController.autoLogin(function(e){if(!e){return}a.app.setSinaUserInfo();a.app.isWeibo()})}});SAB.register("app.isWeibo",function(a){return function(){var c=a.evt.custEvent;var e,b,f;e="http://api.sina.com.cn/weibo/2/users/show.json";b="uid="+$globalInfo.uid+"&source=2835469272";f=function(g){a.app.setWeiboUserInfo(g);c.fire(a,"ce_login")};a.io.jsonp(e,b,f)}});SAB.register("module.login",function(g){var c=g.evt.custEvent;var h=g.dom.byClass;var i=g.dom.addClass;c.define(g,"ce_login");c.define(g,"ce_weiboLogin");c.define(g,"ce_loginError");c.define(g,"ce_logout");var b="http://login.sina.com.cn/member/my.php";var n="http://weibo.com";var f=["http://login.sina.com.cn/member/my.php","http://weibo.com"];var m=['<img src="http://img.t.sinajs.cn/t4/style/images/common/transparent.gif" title="新浪 " alt="sina" class="username_icon"></a>','<img src="http://img.t.sinajs.cn/t4/style/images/common/transparent.gif" title="微博" alt="weibo" class="weibo_icon"></a>'];var e=function(r,p){var q=["login","weibo_login","logout","weibo_login_security"];var s="sinacMNT_";p=p||0;g.dom.ready(function(){var u=document.getElementsByTagName("body")[0];for(var v=0,t=q.length;v<t;v++){var w=q[v];if(w!=r&&!p){g.dom.removeClass(u,s+w)}}g.dom.addClass(u,s+r)})};var o=function(p){g.io.jsonp("http://comment5.news.sina.com.cn/user/security","",function(r){if(r&&r.result&&r.result.data){var q=r.result.data.is_security||false;if(q&&typeof p=="function"){p()}}})};var j=function(){this.init()};j.prototype={init:function(){this.wrap=document.body;var q=g.evt.custEvent;this.bindEvent();if(typeof sinaSSOController=="undefined"){return}var p=sinaSSOController;p.loginExtraQuery.vsnf=1;p.service="vblog";p.pageCharset="GB2312";p.setDomain=true;p.customLoginCallBack=function(r){var s=!g.arr.inArray(r.errno,["5024","5025","4049","2070"]);if(!r.result){q.fire(g,"ce_loginError",{validated:s,info:r});return false}g.app.setSinaUserInfo();g.app.isWeibo();if(ARTICLE_DATA.synLayerLoginStatus){window.SINA_OUTLOGIN_LAYER&&SINA_OUTLOGIN_LAYER.listener.fire("login_success")}};p.customLogoutCallBack=function(r){q.fire(g,"ce_logout");if(ARTICLE_DATA.synLayerLoginStatus){window.SINA_OUTLOGIN_LAYER&&SINA_OUTLOGIN_LAYER.listener.fire("logout_success")}}},bindEvent:function(){var p=this;c.add(g,"ce_logout",function(q){e("logout");p.showUnlogined()},{});c.add(g,"ce_login",function(q){e("login");p.showLogined()},{});c.add(g,"ce_weiboLogin",function(q){e("weibo_login");o(function(){e("weibo_login_security",1)});p.showWeiboLogined()},{})},showLogined:function(r){var q=$globalInfo.sinaNick||$globalInfo.name;var z=q;var s=0;if($globalInfo.isWeiboLogin){q=$globalInfo.weiboNick||$globalInfo.weiboName;z=g.app.strLeft(q,16);q='<a href="'+n+'" target="_blank">'+z+"</a>";s=1}else{z=g.app.strLeft(q,16);q='<a href="'+b+'" target="_blank">'+z+"</a>"}var r=r||this.wrap;var t=h("J_Login_Ico",r);var y=h("J_Unlogin",r);var w=h("J_Logined",r);var p=h("J_Name",r);for(var v=0,x=t.length;v<x;v++){var B=t[v];B.href=f[s];B.innerHTML=m[s]}for(var v=0,x=y.length;v<x;v++){y[v].style.display="none"}for(var v=0,x=w.length;v<x;v++){w[v].style.display=""}for(var v=0,x=p.length;v<x;v++){p[v].innerHTML=q}var A=h("J_Login_User",r);var u=h("J_Login_Psw",r);for(var v=0,x=A.length;v<x;v++){var B=A[v];if($globalInfo.supportPlaceholder){B.value=""}else{B.value=B.getAttribute("placeholder");i(B,"gray")}}for(var v=0,x=u.length;v<x;v++){var B=u[v];if(B.className.indexOf("pwd_placeholder")==-1){B.value=""}}},showUnlogined:function(s){var s=s||this.wrap;var q=h("J_Unlogin",s);var t=h("J_Logined",s);var u=h("J_WeiboLogined",s);for(var r=0,p=q.length;r<p;r++){q[r].style.display=""}for(var r=0,p=t.length;r<p;r++){t[r].style.display="none"}for(var r=0,p=u.length;r<p;r++){u[r].style.display="none"}},showWeiboUnLogined:function(r){var r=r||this.wrap;var s=h("J_WeiboLogined",r);for(var q=0,p=s.length;q<p;q++){s[q].style.display="none"}},showWeiboLogined:function(r){var r=r||this.wrap;var s=h("J_WeiboLogined",r);for(var q=0,p=s.length;q<p;q++){s[q].style.display=""}}};var a=new j();return a});SAB.register("job.topMore",function(f){var g=f.dom;var c=g.byId("J_TopMore");if(!c){return}var a=g.byClass("J_Trigger",c,"a")[0];var e=g.byClass("J_List",c,"div")[0];var b=f.evt.addEvent;b(c,"mouseover",function(){e.style.display="block"});b(e,"mouseover",function(){e.style.display="block"});b(e,"mouseout",function(){e.style.display="none"})});SAB.register("job.topLogin",function(e){var g=e.dom.byClass;var h=e.dom.addClass;var f=e.dom.removeClass;var j=e.evt.addEvent;var b=e.evt.custEvent;var a=e.evt.delegatedEvent;var i=e.dom.contains;var c=function(){this.init()};c.prototype={init:function(){var m=this;m.intervalCount=null;m.weiboData=[];m.getDom()},getDom:function(){var m=e.dom.byId;var n={unlogin:m("J_Unlogin_A"),loginLink:m("J_Login_Btn_A"),logined:m("J_Logined_A"),loginedName:m("J_Logined_Name_A"),loginedList:m("J_Logined_List_A")};if(!n.unlogin){return}this.dom=n;this.changeLoginLink().bindEvent()},changeLoginLink:function(){this.dom.loginLink.href="http://login.sina.com.cn/signup/signin.php?r="+location.href;return this},bindEvent:function(){var o=this;var q=o.dom;var n=q.logined;var m={dom:q.loginedList,isShow:false,show:function(){if(this.dom.innerHTML!==""){this.dom.style.display="block";this.isShow=true}},hide:function(){this.dom.style.display="none";this.isShow=false}};var p=function(s){if(s&&s.preventDefault){s.preventDefault()}else{window.event.returnValue=false}return false};if(!$globalInfo.ua.isIOS){j(q.loginedName,"mouseover",function(){m.show.apply(m)});j(n,"mouseout",function(u){var u=u||window.event;try{var s=u.relatedTarget||u.toElement;var t=s.tagName;if(i(s,n)||!(i(n,s))){m.hide.apply(m)}}catch(u){m.hide.apply(m)}})}else{j(q.loginedName,"click",function(s){s=s||window.event;if(!m.isShow){m.show.apply(m)}p(s)})}j(document.documentElement,"click",function(u){if(!m.isShow){return}u=u||window.event;var s=u.target||u.srcElement;if(i(s,n)||!(i(n,s))){m.hide.apply(m)}});var r=a(n);r.add("logout","click",function(s){e.app.logout()});b.add(e,"ce_logout",function(s){o.showUnlogined()},{});b.add(e,"ce_login",function(s){o.showLogined()},{});if($globalInfo.isLogin){o.showLogined()}r.add("reset","click",function(s){setTimeout(function(){o.updateCounts()},1000)});return o},get_user_lnk:function(m){var p=e.app.strLeft(m,8);var n="http://weibo.com/";var o="http://login.sina.com.cn/member/my.php";var q=$globalInfo.isWeiboLogin?n:o;return'<a href="'+q+'" target="_blank" title="'+m+'">'+p+"</a>"},showLogined:function(){var n=this;var r=n.dom;var q=r.loginedName;r.unlogin.style.display="none";var o=(function(){if($globalInfo.isWeiboLogin){return $globalInfo.weiboNick||$globalInfo.weiboName}else{return $globalInfo.sinaNick||$globalInfo.name}})();var p="";n.nameLnk=n.get_user_lnk(o);if($globalInfo.isWeiboLogin){h(q,"wt_user_weibo");p="drop_weibo"}else{f(q,"wt_user_weibo")}q.innerHTML='<span class="wt_user_cont">'+n.nameLnk+"</span>";q.title=o;var m='<h2 class="'+p+'" ><span class="h2cont">'+n.nameLnk+"</span></h2><ul>"+n.listRender()+'<li class="drop_logout"><a href="javascript:;" onclick="return false;" action-type="logout" action-data="">退出</a></li></ul>';r.loginedList.innerHTML=m;r.logined.style.display="block";n.updateCounts()},showUnlogined:function(){var n=this.dom;var m=e.dom.byClass("outlogin_LoginBtn",n.unlogin,"a")[0];if(m){m.style.display=""}n.unlogin.style.display="block";n.loginedList.innerHTML="";n.logined.style.display="none";e.evt.removeEvent(n.logined)},listRender:function(){var m=this;var o="http://weibo.com/";function n(){var s=[{url:o+"messages?topnav=1&amp;wvr=4",txt:"私信"},{url:o+"comment/inbox?topnav=1&amp;wvr=4&amp;f=1",txt:"评论"},{url:o+"at/weibo?topnav=1&amp;wvr=4",txt:"@我"}];var q=[];for(var p=0;p<s.length;p++){var r=s[p];q.push('<li><a action-type="reset" href="'+r.url+'" title="'+r.txt+'" target="_blank">'+r.txt+"</a></li>")}return q.join("")}if($globalInfo.isWeiboLogin){return n()}else{return""}},updateCounts:function(){var v=this;var q="http://api.sina.com.cn/weibo/2/remind/unread_count.json";var t=v.dom.loginedList;var s=v.dom.loginedName;function m(x,w){x=parseInt(x);return x>w?w+"+":x}function n(C){if(!C){return}var y=[C.dm,C.cmt,C.mention_cmt+C.mention_status];var w=v.nameLnk;if(v.weiboData.toString()==y.toString()){return}else{v.weiboData=y}var B=0;for(var x=0;x<3;x++){var A=u[x];var z=y[x];if(z!==0){A.innerHTML=A.title+'(<span class="fred">'+m(z,999)+"</span>)"}else{A.innerHTML=A.title}B+=z}if(B!==0){s.innerHTML='<span class="wt_user_cont">'+w+'(<span class="fred">'+m(B,999)+"</span>)</span>";r.innerHTML='<span class="h2cont">'+w+'(<span class="fred">'+m(B,999)+"</span>)</span>"}else{s.innerHTML='<span class="wt_user_cont">'+w+"</span>";r.innerHTML='<span class="h2cont">'+w+"</span>"}}if($globalInfo.isWeiboLogin){var r=t.getElementsByTagName("h2")[0];var u=t.getElementsByTagName("ul")[0].getElementsByTagName("a");var p="uid="+$globalInfo.uid+"&source=2835469272";var o=function(w){n(w.result.data)};e.io.jsonp(q,p,o)}if(v.intervalCount){clearTimeout(v.intervalCount)}v.intervalCount=setTimeout(function(){v.updateCounts()},30*1000)}};e.dom.ready(function(){var m=new c()})});SAB.register("job.topLoginForm",function(b){var a=b.evt.custEvent;var e=window.SINA_OUTLOGIN_LAYER;if(e){var c=e.STK;c.Ready(function(){var f=c.E("J_Logined_Name_A");var g=c.E("J_Login_Btn_A");e.set("sso",{entry:"account"}).set("styles",{marginTop:"30px",marginLeft:"7px",zIndex:"10001"}).set("plugin",{position:"top,right",relatedNode:c.E("J_Login_Btn_A")}).register("login_success",function(){b.app.setSinaUserInfo();b.app.isWeibo()}).register("logout_success",function(){a.fire(b,"ce_logout")}).setLoginButton(g).init()})}});SAB.register("app.post",function($){return function(url,param,cb,timeoutCb,time){var cbName="iJax"+Date.parse(new Date());try{doc.domain="sina.com.cn"}catch(e){}param.callback=cbName;var TIMEOUT_NAME="TD_"+(new Date()).getTime();$.util.timeoutHandle(TIMEOUT_NAME,function(handle){handle.timeout(TIMEOUT_NAME,function(){if(typeof timeoutCb=="function"){timeoutCb()}});window[cbName]=function(m){if(typeof m=="string"){m=eval("("+m+")")}if(typeof cb=="function"){cb(m)}handle.success(TIMEOUT_NAME)};if(!$globalInfo.ua.isFF||(param.iframe&&param.iframe===1)){$.io.ijax.request(url,{POST:param})}else{param.callback=undefined;param=$.json.jsonToQuery(param);var Sender=new $.io.html5Ijax({proxyUrl:"http://comment5.news.sina.com.cn/comment/postmsg.html"});Sender.send({url:url,data:param,onsuccess:window[cbName],onfailure:function(){}})}},time||5000)}});SAB.register("job.cmntCustEvent",function(b){var a=b.evt.custEvent;a.define(b,"ce_cmntHtmlInit");a.define(b,"ce_cmntLoadStart");a.define(b,"ce_cmntLoadEnd");a.define(b,"ce_cmntRenderStart");a.define(b,"ce_cmntRenderEnd");a.define(b,"ce_cmntFirstRenderEnd");a.define(b,"ce_cmntItemFirstRenderEnd");a.define(b,"ce_cmntShowMore");a.define(b,"ce_cmntFormReset");a.define(b,"ce_cmntFormFix");a.define(b,"ce_cmntSubmitEnd");a.define(b,"ce_cmntReload")});SAB.register("job.cmntListToggle",function(c){var a=function(){var h=c.job.cmntList;var g=h.data;var j=h.dom;var i=c.dom.byId("J_Comment_Wrap");var f=c.dom.byId("J_Comment_List_Wrap");if(g.news&&g.news.status=="N_CLOSE"){return}else{i.style.display=""}if(!g.cmntlist||g.cmntlist.length==0){return}var e=ARTICLE_DATA.hideCMNTList&&ARTICLE_DATA.hideCMNTList==1;if(e){return}else{f.style.display=""}};var b=c.evt.custEvent;b.add(c,"ce_cmntRenderStart",a)});SAB.register("app.formatTime",function(f){var g="月",e="日",b="今天",c="秒前",a="分钟前";return function(i,u){var r=i.getFullYear(),o=u.getFullYear(),n=i.getMonth()+1,p=u.getMonth()+1,j=i.getDate(),s=u.getDate(),m=i.getHours(),h=u.getHours();h<10&&(h="0"+h);var q=u.getMinutes();q<10&&(q="0"+q);var t=i-u;t=t>0?t:0;t=t/1000;if(r!=o){return o+"-"+p+"-"+s+" "+h+":"+q}if(n!=p||j!=s){return p+g+s+e+h+":"+q}if(m!=h&&t>3600){return b+h+":"+q}if(t<51){t=t<1?1:t;return Math.floor((t-1)/10)+1+"0"+c}return Math.floor(t/60+1)+a}});SAB.register("app.getTimeStr",function(a){var b=a.app.formatTime;return function(g,f){f=f||"";if(g){var i=new Date;g=g.replace(/-/g,"/");var h=Date.parse(g);i.setTime(parseInt(h,10));var e=new Date;e.setTime(e.getTime());var c=b(e,i)}else{h=Date.parse(new Date);var c="1秒前"}return'<span class="'+f+' J_Comment_Time" date="'+h+'">'+c+"</span>"}});SAB.register("app.updateTime",function(c){var b=c.app.formatTime,a=c.evt.custEvent;cDate=0,d=function(m){var f=c.dom.byClass("J_Comment_Time",m),i=new Date;i.setTime(i.getTime()-cDate);var o;for(var j=0;j<f.length;j++){var n=f[j],e=n.getAttribute("date");if(!/^\s*\d+\s*$/.test(e)){continue}var p=new Date;p.setTime(parseInt(e,10));n.innerHTML=b(i,p);o==undefined&&(o=i.getTime()-p.getTime()<60000)}return o};return function(i){var f=1000;var h,e=function(g){clearTimeout(h);h=setTimeout(function(){d(i)?e(f):e(60000)},g)},j=function(){e(f)};e(f);a.add(c,"ce_cmntItemFirstRenderEnd",j);var m={destroy:function(){clearTimeout(h);a.remove(c,"ce_cmntItemFirstRenderEnd",j);m=i=h=e=j=null}};return m}});SAB.register("cmnt.data",function(f){var c={cmntlist:{},replydict:{},newsdict:{}};var a=f.arr.isArray;var b=f.obj.extend;var e={set:function(m,o){var j=c[m];var n,p;if(a(o)){for(var h=0,g=o.length;h<g;h++){n=o[h];if(n.mid){p=n.mid}else{if(n.newsid){p=n.newsid}}j[p]=n}}else{j=b(j,o)}c[m]=j},get:function(g,h){if(!g){return c}if(!h){return c[g]||c}return c[g][h]}};return e});SAB.register("cmnt.util.setConfig",function(h){var i=h.clz.extend;var e=this.url=new h.util.url(location.href);var g=e.query||{};var a={"哈哈":"haha","偷笑":"tx","泪":"lei","嘻嘻":"xixi","爱你":"aini","挖鼻屎":"wbs","心":"xin"};var c={"国旗":"dc/flag_thumb","走你":"ed/zouni_thumb","笑哈哈":"32/lxhwahaha_thumb","江南style":"67/gangnamstyle_thumb","吐血":"8c/lxhtuxue_thumb","好激动":"ae/lxhjidong_thumb","lt切克闹":"73/ltqiekenao_thumb","moc转发":"cb/moczhuanfa_thumb","ala蹦":"b7/alabeng_thumb","gst耐你":"1b/gstnaini_thumb","xb压力":"e0/xbyali_thumb","din推撞":"dd/dintuizhuang_thumb","草泥马":"7a/shenshou_thumb","神马":"60/horse2_thumb","浮云":"bc/fuyun_thumb","给力":"c9/geili_thumb","围观":"f2/wg_thumb","威武":"70/vw_thumb","熊猫":"6e/panda_thumb","兔子":"81/rabbit_thumb","奥特曼":"bc/otm_thumb","?":"15/j_thumb","互粉":"89/hufen_thumb","礼物":"c4/liwu_thumb","呵呵":"ac/smilea_thumb","嘻嘻":"0b/tootha_thumb","哈哈":"6a/laugh","可爱":"14/tza_thumb","可怜":"af/kl_thumb","挖鼻屎":"a0/kbsa_thumb","吃惊":"f4/cj_thumb","害羞":"6e/shamea_thumb","挤眼":"c3/zy_thumb","闭嘴":"29/bz_thumb","鄙视":"71/bs2_thumb","爱你":"6d/lovea_thumb","泪":"9d/sada_thumb","偷笑":"19/heia_thumb","亲亲":"8f/qq_thumb","生病":"b6/sb_thumb","太开心":"58/mb_thumb","懒得理你":"17/ldln_thumb","右哼哼":"98/yhh_thumb","左哼哼":"6d/zhh_thumb","嘘":"a6/x_thumb","衰":"af/cry","委屈":"73/wq_thumb","吐":"9e/t_thumb","打哈欠":"f3/k_thumb","抱抱":"27/bba_thumb","怒":"7c/angrya_thumb","疑问":"5c/yw_thumb","馋嘴":"a5/cza_thumb","拜拜":"70/88_thumb","思考":"e9/sk_thumb","汗":"24/sweata_thumb","困":"7f/sleepya_thumb","睡觉":"6b/sleepa_thumb","钱":"90/money_thumb","失望":"0c/sw_thumb","酷":"40/cool_thumb","花心":"8c/hsa_thumb","哼":"49/hatea_thumb","鼓掌":"36/gza_thumb","晕":"d9/dizzya_thumb","悲伤":"1a/bs_thumb","抓狂":"62/crazya_thumb","黑线":"91/h_thumb","阴险":"6d/yx_thumb","怒骂":"89/nm_thumb","心":"40/hearta_thumb","伤心":"ea/unheart","猪头":"58/pig",ok:"d6/ok_thumb","耶":"d9/ye_thumb",good:"d8/good_thumb","不要":"c7/no_thumb","赞":"d0/z2_thumb","来":"40/come_thumb","弱":"d8/sad_thumb","蜡烛":"91/lazu_thumb","蛋糕":"6a/cake","钟":"d3/clock_thumb","话筒":"1b/m_thumb"};var b=(function(){var j=/slide\..*?.sina.com.cn/;return j.test(location.host)?"slide":""})();var f={video_url:"",pic_url:"",channel:"ty",newsid:"6-12-6341970",group:0,encoding:"gbk",hideCMNTList:0,source:"新浪娱乐",sourceUrl:"http://ent.sina.com.cn/",uid:"1642591402",style:0,channelId:28,isBBS:0,pageType:b,pageSize:100,pageNum:10,hotPageNum:10,commonFaces:a,commonFacesBase:"http://i3.sinaimg.cn/dy/deco/2012/1217/face/",allFaces:c,allFacesBase:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/",postPlaceholder:"请输入评论内容",postContent:"",hideFaces:0,hideCount:0,formPosition:"top",cmntFix:1,maxFloor:10,hideHead:0,autoLogin:0,autoLoginInterval:8000,info_type:0,scrollLoad:0,synLayerLoginStatus:0};ARTICLE_DATA=typeof ARTICLE_DATA!="undefined"?ARTICLE_DATA:{};return function(){ARTICLE_DATA=i(f,ARTICLE_DATA,true);ARTICLE_DATA=i(ARTICLE_DATA,g,true);if(ARTICLE_DATA.formPosition!=="top"){ARTICLE_DATA.cmntFix=0}return ARTICLE_DATA}});SAB.register("cmnt.util.filterEmotionIco",function(e){var c=ARTICLE_DATA.allFacesBase;var b=ARTICLE_DATA.allFaces;var a=/\[(.*?)\]/g;return function(f){f=f||"";f=f.replace(a,function(h,g){var i=b[g];if(i){i=c+i+".gif"}return !i?g:'<img class="comment_content_emotion" title="'+g+'" alt="'+g+'" src="'+i+'" />'});return f}});SAB.register("cmnt.util.getWBName",function(a){return function(c){if(typeof c.config=="undefined"){return""}var b=c.config.match(/wb_screen_name=([^&]*)/i);return b?b[1]:""}});SAB.register("cmnt.util.getWBV",function(b){var a=b.json.queryToJson;return function(h){if(typeof h.config=="undefined"){return""}var c="";var f=a(h.config);var e=f.wb_verified;var g=f.wb_verified_type;if(typeof e!="undefined"&&e=="1"){if(g=="0"){c="y"}else{c="b"}}return c}});SAB.register("cmnt.util.get_user_lnk",function(b){var a=b.cmnt.util.getWBV;return function(i){var e=this;var g="";var f=a(i);var h="新浪个人认证";if(f){if(f=="b"){h="新浪机构认证"}g='<img src="http://i3.sinaimg.cn/dy/deco/2013/0608/v'+f+'.png" title="'+h+'" style="vertical-align: middle;" />'}var j=e.getWBName(i);var c="http://comment5.news.sina.com.cn/comment/skin/default.html?info_type=1&style=1&user_uid=";if(j==""){if(i.uid&&i.uid!="0"){return'<a href="'+c+i.uid+'" target="_self">'+i.nick+"</a>"}else{return i.nick}}else{return'<a href="'+c+i.uid+'" target="_self">'+j+g+"</a>"}}});SAB.register("cmnt.util.get_user_face",function(e){var a="http://weibo.com/u/";var b=e.cmnt.util.getWBName;var c=e.json.queryToJson;return function(h){if(ARTICLE_DATA.hideHead){return""}var f=this;config=h.config||"";var g=c(config,true).wb_profile_img||"http://i3.sinaimg.cn/dy/deco/2012/1018/sina_comment_defaultface.png";var i=b(h);if(i==""){return'<img src="'+g+'"/>'}else{return'<a href="'+a+h.uid+'" title="'+i+'" target="_blank"><img src="'+g+'"/></a>'}}});SAB.register("cmnt.util.get_user_ico",function(c){var b={wap:"t_mobile",wb:"t_weibo"};var a=c.cmnt.util.getWBName;return function(f){var e=b[f.usertype];e=e||"";if(e==""){var g=a(f);if(g==""){e=""}else{e=b.wb}}return e}});SAB.register("cmnt.util.replyListRender",function(f){var a="http://weibo.com/u/";var e=ARTICLE_DATA.maxFloor;var c=f.str.encodeHTML;var g=f.app.getTimeStr;var h=f.cmnt.util;var b=f.cmnt.data;return function(w,x){var y=w.mid;var r=[];if(x){r=x[y]}b.set("cmntlist",r);var m="";if(r&&r.length>0){for(var s=0,v=r.length;s<v;s++){var z=r[s];var q=h.getWBName(z);var p="channel="+z.channel+"&newsid="+z.newsid+"&mid="+z.mid;var u=q==""?'<a href="'+a+z.uid+'" target="_blank">'+h.getWBName(z)+"</a>":w.nick;var j=(z.area==""?"&nbsp;":"["+z.area+"]");var o="";if(s!==0){o=1}var n=' href="javascript:;" action-type="share" action-data="'+p+"&usertype="+z.usertype+"&wb_screen_name="+q+"&area="+z.area+"&nick="+z.nick+"&con="+z.content+"&type=reply&hasReply="+o+"&site=";var t='<span class="orig_index">'+(s+1)+'</span><div class="orig_user">'+h.get_user_lnk(z)+'<span class="orig_area">'+j+'</span></div><div class="orig_content">'+h.filterEmotionIco(c(z.content))+'</div><div class="orig_reply" style="visibility: ;"><div class="reply">'+g(z.time,"orig_time")+'<span class="cmnt_report"><a href="http://comment5.news.sina.com.cn/comment/skin/feedback_jb.html?mid='+z.mid+'" target="_blank">举报</a></span><span class="reply-right"><a action-type="vote" action-data="'+p+'" href="javascript:;" voted="false" class="comment_ding_link" title="支持"><span>支持<em>('+z.agree+')</em></span></a> <a action-type="reply" action-data="'+p+"&parMid="+y+'&type=innerReply" href="javascript:;" poped="false" class="comment_reply_link" title="回复">回复</a> <a href="javascript:;" action-type="shareHover" class="cmnt-share-tirgger" title="分享"><em>分享</em></a></span><span class="cmnt-share-btns J_Comment_Share_Btns"><a title="分享到新浪微博" class="cmnt-share-btn-sina" '+n+'sina">新浪</a><a title="分享到腾讯微博" class="cmnt-share-btn-qq" '+n+'tencent">腾讯</a></span></div></div>';if(s<e){m='<div class="orig_cont clearfix">'+m+t+"</div>"}else{m=m+'<div class="orig_cont clearfix">'+t+"</div>"}}}if(m!==""){m='<div class="comment_orig_content">'+m+"</div>"}return m}});SAB.register("cmnt.util.getNewsLink",function(a){return function(h,g){var f="";var c="";var e=(ARTICLE_DATA.isBBS&&ARTICLE_DATA.style);var b=g.newsdict;if(e){f=b[h];if(f){c='<span class="t_newslink"><a target="_blank" href="'+f.url+'" title="'+f.title+'">'+f.title+"</a></span>"}}return c}});SAB.register("cmnt.util.cmntItemRender",function(e){var c=e.str.encodeHTML;var f=e.app.getTimeStr;var h=e.cmnt.util;var b=e.evt.custEvent.fire;var g=e.app.splitNum;var a=true;return function(s,p){if(typeof s.mid=="undefined"){return""}var r="";var t=s.mid;var i=(s.area==""?"&nbsp;":"["+s.area+"]");var q="channel="+s.channel+"&newsid="+s.newsid+"&mid="+t;var j=h.replyListRender(s,p.replydict);var n="";if(j){n=1}var o=h.getWBName(s);var m='href="javascript:;" action-type="share" action-data="'+q+"&wb_screen_name="+o+"&hasReply="+n+"&site=";j='<div class="J_Comment_Reply">'+j+"</div>";r='<div class="comment_item" id="J_Comment_Item-'+t+'"><div class="comment_item_cont clearfix"><div class="J_Comment_Face t_face">'+h.get_user_face(s)+'</div><div class="t_content"><div class="J_Comment_Info"><div class="t_info"> '+h.getNewsLink(s.newsid,p)+' <span class="t_username '+h.get_user_ico(s)+'">'+h.get_user_lnk(s)+'</span><span class="t_area">'+i+"</span></div></div>"+j+'<div class="comment_content J_Comment_Txt clearfix"><div class="t_txt">'+h.filterEmotionIco(c(s.content))+'</div><div class="reply" style="visibility: visible;">'+f(s.time,"datetime")+'<span class="cmnt_report"><a href="http://comment5.news.sina.com.cn/comment/skin/feedback_jb.html?mid='+t+'" target="_blank">举报</a></span><div class="vote_tip">+1</div> <span class="reply-right"><a action-type="vote" action-data="'+q+'" href="javascript:;" voted="false" class="comment_ding_link" title="支持"><span>支持<em>('+g(s.agree)+')</em></span></a> <a action-type="reply" action-data="'+q+'&type=outerReply" href="javascript:;" poped="false" class="comment_reply_link" title="回复">回复</a> <a href="javascript:;" action-type="shareHover" class="cmnt-share-tirgger" title="分享"><em>分享</em></a></span><span class="cmnt-share-btns J_Comment_Share_Btns"><a title="分享到新浪微博" class="cmnt-share-btn-sina" '+m+'sina">新浪</a><a title="分享到腾讯微博" class="cmnt-share-btn-qq"  '+m+'tencent">腾讯</a></span></div></div></div></div></div>';if(a){b(e,"ce_cmntItemFirstRenderEnd");a=false}return r}});SAB.register("cmnt.util.cmntListRender",function(e){var c=ARTICLE_DATA.pageNum;var g=ARTICLE_DATA.firstPageNum||c;var a=ARTICLE_DATA.hotPageNum;var b=false;var f=e.cmnt.util;return function(p,h){var o=[];if(typeof p!=="object"){return""}var u=h.type;var n=h.data;var r=0;var j=0;var q=0;var w="";var t=0;if(u=="latest"){for(var m in p){t++;var v=r<g?g:c;if(t===1){w=r==0?"_first":"";o.push('<div class="comment_item_page'+w+' J_Comment_Page_Latest" style="display:none">');j++;q++}o.push(f.cmntItemRender(p[m],n));if(t===v){o.push("</div>");j++;t=0}r++}if(j%2!=0){o.push("</div>")}}else{if(u=="hot"){for(var m in p){if(r<a){o.push(f.cmntItemRender(p[m],n));r++}}}else{for(var m in p){o.push(f.cmntItemRender(p[m],n));if((r+1)/a==1){o.push("</div>");j++}}}}if(!b&&q>1){try{_S_uaTrack("entcomment","onemorepageview")}catch(s){}b=true}return o.join("")}});SAB.register("cmnt.itemLoader",function(c){var e=c.cmnt.util;var b=c.cmnt.data;function a(h,g){var f=this;if(typeof h=="string"){h=c.E(h)}if(!h){return}f.wrap=h;f.config=g||{mids:""};f.getData()}a.prototype={render:function(){var f=this;var i=f.loader.data;i.replydict={};i.newsdict={};f.setData(i);var h=i.cmntlist;var g=e.cmntListRender(h,{type:"",data:i});f.wrap.innerHTML=g},getData:function(){var f=this;var g="http://comment5.news.sina.com.cn/cmnt/info";var h={format:"js",compress:1,ie:ARTICLE_DATA.encoding,oe:ARTICLE_DATA.encoding,mid:f.config.mids.join(",")};f.loader=new c.app.dataLoader({url:g,param:h,beforeLoad:function(){},loaded:function(){f.render()}});f.loader.init()},setData:function(f){b.set("newsdict",f.newsdict);b.set("cmntlist",f.cmntlist);b.set("replydict",f.replydict)}};return a});SAB.register("cmnt.listLoader",function(c){var e=c.cmnt.util;var b=c.cmnt.data;function a(h,g){var f=this;if(typeof h=="string"){h=c.E(h)}if(!h){return}f.wrap=h;f.config=g||{mids:""};f.getData()}a.prototype={render:function(){var f=this;var i=f.loader.data;i.replydict={};i.newsdict={};f.setData(i);var h=i.cmntlist;var g=e.cmntListRender(h,{type:"",data:i});f.wrap.innerHTML=g},getData:function(){var f=this;var g="http://comment5.news.sina.com.cn/cmnt/info";g=f.config.url||g;var h={format:"js",compress:1,ie:ARTICLE_DATA.encoding,oe:ARTICLE_DATA.encoding};f.loader=new c.app.dataLoader({url:g,param:h,beforeLoad:function(){},loaded:function(){f.render()}});f.loader.init()},setData:function(f){b.set("newsdict",f.newsdict);b.set("cmntlist",f.cmntlist);b.set("replydict",f.replydict)}};return a});SAB.register("job.cmntShare",function($){var _byteLength=$.str.byteLength;var _strLeft=$.app.strLeft;var _encode=encodeURIComponent;var _cmntData=$.cmnt.data;var getShareName=function(name,nick,usertype){var newName="";if(name){newName="@"+name}else{if(usertype=="wap"){newName="新浪手机用户";if(nick!="手机用户"){newName+=nick}}else{newName="新浪网友";if(nick){newName+=nick}}}return newName};var getShareContent=function(title,shareName,cmnt){var extra=(function(){if(ARTICLE_DATA.pageType=="slide"&&title.indexOf("组图：")==-1){return"（组图）"}else{return""}})();title=title.replace(/<.*?>/ig,"");title="#精彩评论#【"+title+"】"+extra+shareName+"："+cmnt;return _encode(title)};var getUrlData=function(o,newWin){var s=screen;var d=document;var clickData=o.data;var mid=clickData.mid;var site=clickData.site;var curCmntlist=_cmntData.get("cmntlist",mid);var cmnt=curCmntlist.content;var newsid=curCmntlist.newsid;var channel=curCmntlist.channel;var img=ARTICLE_DATA.pic_url&&ARTICLE_DATA.pic_url.length>0?ARTICLE_DATA.pic_url[0]:"";var setWinUrl=function(){var link=location.href;var shareName=getShareName(clickData.wb_screen_name,curCmntlist.nick,curCmntlist.usertype);var title=(function(){var newsData=_cmntData.get("newsdict",newsid);if(typeof newsData=="undefined"&&curCmntlist.news_info){return curCmntlist.news_info.title||""}else{return newsData.title||""}})();var cont=getShareContent(title,shareName,cmnt);var API={sina:{base:"http://v.t.sina.com.cn/share/share.php?",param:["url=",_encode(link),"&title=",cont,"&source=",_encode("新浪新闻评论"),"&sourceUrl=",_encode("http://news.sina.com.cn/hotnews/"),"&content=","gb2312","&pic=",_encode(img),"&appkey=","445563689"].join("")},tencent:{base:"http://share.v.t.qq.com/index.php?",param:["c=","share","&a=","index","&url=",_encode(link),"&title=",cont,"&content=","gb2312","&pic=",_encode(img),"&appkey=","dcba10cb2d574a48a16f24c9b6af610c","&assname=","${RALATEUID}"].join("")}};if(newWin){newWin.location.href=[API[site].base,API[site].param].join("")}};var getImgSrc=function(o){var cbName="iJax"+Date.parse(new Date());var url="http://comment5.news.sina.com.cn/image";window[cbName]=function(m){if(typeof m=="string"){m=eval("("+m+")")}var cmntImg=m.result.image||"";img=img?img+"||"+cmntImg:cmntImg;if(/Firefox/.test(navigator.userAgent)){setTimeout(function(){setWinUrl()},30)}else{setWinUrl()}};if(!$globalInfo.ua.isFF){var param={channel:channel,newsid:newsid,mid:mid,format:"js",callback:cbName};$.io.ijax.request(url,{POST:param})}else{var param="channel="+channel+"&newsid="+newsid+"&mid="+mid;var Sender=new $.io.html5Ijax({proxyUrl:"http://comment5.news.sina.com.cn/comment/postmsg.html"});Sender.send({url:url,data:param,onsuccess:window[cbName],onfailure:function(){}})}};var maxCmntLen=80;if(clickData.hasReply||_byteLength(cmnt)>maxCmntLen*2){cmnt=_strLeft(cmnt,maxCmntLen*2);getImgSrc()}else{setWinUrl()}};var bindShare=function(){var byId=$.dom.byId;var wrap=document.getElementsByTagName("body")[0];if(!wrap){return}var dldEvt=$.evt.delegatedEvent;var dldEvt_share=dldEvt(wrap);dldEvt_share.add("share","click",function(o){var ele=o.el;var newWin=window.open("","mb",["toolbar=0,status=0,resizable=1,width=440,height=430,left=",(screen.width-440)/2,",top=",(screen.height-430)/2].join(""));getUrlData(o,newWin)})};var cusEvt=$.evt.custEvent;cusEvt.add($,"ce_cmntItemFirstRenderEnd",bindShare)});SAB.register("job.cmntShareHover",function(c){var a=function(){var v=c.dom.byId;var i=c.dom.byClass;var n=c.dom.addClass;var u=c.dom.removeClass;var g=document.getElementsByTagName("body")[0];if(!g){return}var h=c.evt.delegatedEvent;var p=h(g);var e=null;var f;var o=500;var s="cmnt-share-tirgger-active";var m,q;if(ARTICLE_DATA.sharePopDirection&&ARTICLE_DATA.sharePopDirection=="top"){m={jq:{top:"-28px"},o:";right:-14px;top:-28px;display:block;"};q={jq:{opacity:"hide",top:"0"},o:";right:-14px;top:0,display:none;"}}else{m={jq:{right:"-68px"},o:";right:-68px;display:block;"};q={jq:{opacity:"hide",top:"0"},o:";right:-14px;display:none;"}}var t=function(x,w){if(typeof jQuery!="undefined"){jQuery(w).show().animate(m.jq,"fast")}else{w.style.cssText=m.o}e=x;n(x,s)};var j=function(x,w){if(typeof jQuery!="undefined"){jQuery(w).animate(q.jq,"fast")}else{w.style.cssText=q.o}if(x){u(x,s);e=null}};var r=function(w){return i("J_Comment_Share_Btns",w.parentNode.parentNode)[0]};p.add("shareHover","mouseover",function(y){clearTimeout(f);var x=y.el;var w=r(x);if(e&&e!=x){j(e,r(e))}t(x,w)});p.add("shareHover","mouseout",function(z){var y=z.el;var x=r(y);var w=z.evt;x.onmouseout=function(){f=setTimeout(function(){j(y,x)},o)};x.onmouseover=function(){clearTimeout(f)};f=setTimeout(function(){j(y,x)},o)})};var b=c.evt.custEvent;b.add(c,"ce_cmntItemFirstRenderEnd",a)});SAB.register("job.cmntCountLink",function(c){var a=c.dom.byId;var b=c.evt.delegatedEvent;var e=c.app.anchorGo;c.dom.ready(function(){var f=b(document.getElementsByTagName("body")[0]);f.add("anchorGo","click",function(m){var h=m.el;var n=(m.data.y&&parseInt(m.data.y))||-15;e(h,800,n,1,m.e);var i=h.href.split("#")[1];if(i=="J_Comment_Wrap"||i=="J_Comment_Form_B"){var g=a("J_Comment_Form_B");var j=g&&g.getElementsByTagName("textarea")[0];if(j){setTimeout(function(){c.app.shine(j)},800)}}})})});SAB.register("job.cmntCountUpdateNews",function(b){var e=b.app.splitNum;var c=function(){if(!$globalInfo.news){return}var m=b.job.cmntList;if(m.data.news&&m.data.news.status=="N_CLOSE"){return}var n=b.dom.byClass("J_Comment_Count_Txt");var p="http://comment5.news.sina.com.cn/comment/skin/default.html";if(ARTICLE_DATA.channel==="yl"){p="http://comment5.news.sina.com.cn/comment/skin/default_1.html"}var o=p+"?channel="+$globalInfo.news.channel+"&newsid="+$globalInfo.news.newsid;var g=function(){};if(ARTICLE_DATA.hideCMNTList){g=function(i){i.setAttribute("action-type","");i.href=o}}if(n&&n.length>0){var f='已有<span class="f_red">'+e(m.totalNum)+'</span>条评论，共<span class="f_red">'+e(m.data.count.total)+"</span>人参与";if(m.totalNum==0){for(var j=n.length-1;j>=0;j--){var h=n[j];h.style.display=""}return}for(var j=n.length-1;j>=0;j--){var h=n[j];g(h);if(j!==0){h.innerHTML=f}else{h.innerHTML='<span>我有话说(</span><span class="f_red">'+e(m.data.count.total)+"</span><span>人参与)</span>"}if(j>1){h.href=o}h.style.display=""}}};var a=b.evt.custEvent;a.add(b,"ce_cmntRenderStart",c)});SAB.register("job.cmntTitleToggle",function(c){var a=function(){var e=c.dom.byId;var f=c.job.cmntList.data;if(!f){return}if(f.news&&f.news.column=="彩票"){e("J_Comment_CP_Tip").style.display="block"}if(f.hot_list&&f.hot_list.length!=0){e("J_Comment_Wrap_Hot").style.display=""}if(f.cmntlist){e("J_Comment_Wrap_Latest").style.display=""}};var b=c.evt.custEvent;b.add(c,"ce_cmntFirstRenderEnd",a)});SAB.register("job.cmntEndTip",function(c){var b=function(){var g="http://comment5.news.sina.com.cn/comment/skin/default.html";var f=g;var e=c.job.cmntList.dom.end;if(!e){return}if(ARTICLE_DATA.info_type==1||ARTICLE_DATA.info_type==2){e.innerHTML='<a href="#J_Comment_Wrap">已到最后一页，点击返回顶部</a>'}else{f=g+"?channel="+$globalInfo.news.channel+"&newsid="+$globalInfo.news.newsid;if((ARTICLE_DATA.group||ARTICLE_DATA.style)&&(ARTICLE_DATA.group!="0"||ARTICLE_DATA.style!=0)){f+="&style=1"}if(!ARTICLE_DATA.isBBS){e.innerHTML='<a href="'+f+'" target="_blank">已到最后一页，更多精彩评论&gt;&gt;</a>'}else{e.innerHTML='<a href="#J_Comment_Wrap">已到最后一页，点击返回顶部</a>'}}};var a=c.evt.custEvent;a.add(c,"ce_cmntFirstRenderEnd",b)});SAB.register("job.cmntReload",function(c){var a=function(){var g=c.job.cmntList;var f=g.dom.wrap;if(!f){return}var e=c.evt.delegatedEvent;var h=e(f);h.add("reload","click",function(r){if(g.loading){return}b.fire(c,"ce_cmntReload");var n=r.data.type;if(n){var q=c.dom.byId("J_Comment_List_"+n);var p=q.parentNode;var j=[];j.push('<div class="comment_item comment_loading">');j.push("<span>");j.push('<img src="http://i3.sinaimg.cn/ent/deco/2012/0912/images/indicator_24.gif" height="24" width="24" alt="" style="vertical-align:middle;">评论加载中，请稍候...</span>');j.push("</div>");var m=c.C("div");m.innerHTML=j.join("");p.insertBefore(m,q);var i=function(){p.removeChild(m);b.remove(c,"ce_cmntRenderEnd",i)};b.add(c,"ce_cmntRenderEnd",i)}g.setType(n.toLowerCase());g.options.param.page=1;g.getData()})};var b=c.evt.custEvent;b.add(c,"ce_cmntFirstRenderEnd",a)});SAB.register("job.cmntForm",function(e){var r=e.dom.byId;var f=e.dom.byClass;var h=e.dom.addClass;var o=e.dom.removeClass;var p=e.evt.addEvent;var a=e.evt.custEvent;var i=e.str.encodeHTML;var b=e.str.trim;var n=e.cmnt.util;var q=e.app.formatTime;var g=e.app.updateTime;var j=e.app.getTimeStr;var m=function(s){var t=s.getAttribute("placeholder");if(!t){if(s.attributes&&s.attributes.placeholder){t=s.attributes.placeholder.value}}return t||""};var c=function(s){this.init(s)};c.prototype={init:function(t){var s=this;s.commenting=false;s.getMid(t);s.getNewsid(t);s.getChannel(t);s.getDom(t)},getMid:function(t){var s=t.replace("J_Comment_Form_","").split("_")[0];this.mid=s},getNewsid:function(t){var s=t.replace("J_Comment_Form_","").split("_")[2];this.newsid=s||""},getChannel:function(t){var s=t.replace("J_Comment_Form_","").split("_")[3];this.channel=s||""},getDom:function(v){var s=this;var u=e.dom;var t=r(v);if(!t){return}this.dom={wrap:t,form:f("J_Comment_Form",t)[0],content:f("J_Comment_Content",t)[0],submit:f("J_Comment_Submit",t)[0],commentTip:f("J_Comment_Tip",t)[0],user:f("J_Login_User",t)[0],psw:f("J_Login_Psw",t)[0],remeber:f("J_Login_Remeber",t)[0],login:f("J_Login_Submit",t)[0],logout:f("J_Login_Logout",t)[0],loginTip:f("J_Login_Tip",t)[0],toWeiboWrap:f("J_Comment_ToWeibo_Wrap",t)[0],toWeibo:f("J_Comment_ToWeibo",t)[0]};s.bindEvent()},bindEvent:function(){var v=this;var w=v.dom;var t=function(){v.commenting=true;var A=b(w.content.value);var z=m(w.content);if(A==""||A==z){v.commentTip("error",z);w.content.focus();return}if(e.util.byteLength(A)>6000){alert("您的评论字数超出了上限3000字,请修改后再提交！");w.content.focus();return}if(!sinaSSOController.getSinaCookie()){var x=b(w.user.value);var y=b(w.psw.value);if(x==""||y==""){v.commentTip("error","请先登录再提交评论");w.user.focus();return}v.loginWithComment=true;a.add(e,"ce_login",function(C){if(C.data.action==="loginWithComment"&&v.loginWithComment){v.comment();v.commenting=false;v.loginWithComment=false}},{action:"loginWithComment"});try{_S_uaTrack("entcomment","login")}catch(B){}v.login()}else{v.comment()}};var u=function(y,x){if(window.ActiveXObject){y.onpropertychange=x}else{y.addEventListener("input",x,false)}};p(w.logout,"click",function(x){e.app.logout()});p(w.toWeiboWrap,"click",function(y){try{_S_uaTrack("entcomment","toweibo")}catch(x){}});p(w.submit,"click",function(){t()});p(w.user,"keydown",function(x){x=x||window.event;if(x.keyCode==13){try{_S_uaTrack("entcomment","login")}catch(x){}v.login()}});p(w.psw,"keydown",function(x){x=x||window.event;if(x.keyCode==13){try{_S_uaTrack("entcomment","login")}catch(x){}v.login()}});p(w.content,"keydown",function(x){x=x||window.event;if(x.keyCode==13&&x.ctrlKey){t()}});p(w.content,"keyup",function(x){setTimeout(function(){v.toggleSubmitBtn()},200)});p(w.wrap,"click",function(x){setTimeout(function(){v.toggleSubmitBtn()},200)});p(w.content,"focus",function(x){setTimeout(function(){v.toggleSubmitBtn()},200)});u(w.content,function(){v.toggleSubmitBtn()});var s=[w.user,w.psw,w.content];e.app.placeholder(s);return v},toggleSubmitBtn:function(){var u=this;var y=u.dom;var v=y.content;var x=y.submit;var s=b(v.value);var t=m(v);var w="post_inline_comment_disbled";if(s==""||s==t){h(x,w)}else{o(x,w)}},login:function(){if($globalInfo.isLogin){return}var u=this;var w=u.dom;var s=b(w.user.value);var t=b(w.psw.value);var v=parseInt(w.remeber.getAttribute("remeberme"));if(s==""||t==""){w.loginTip.innerHTML='<span class="notice">用户名/密码不能为空</span>';w.loginTip.style.display="";setTimeout(function(){if(window.jQuery){jQuery(w.loginTip).fadeOut("slow")}else{w.loginTip.style.display="none"}},3000)}else{a.remove(e,"ce_loginError");a.add(e,"ce_loginError",function(y,x){if(!x.validated){u.loginVerify(y,x.info)}else{u.loginError(y)}},w);e.app.login(s,t,v)}},loginError:function(s){var t=s.data;t.loginTip.innerHTML='<span class="notice">用户名/密码错误</span>';t.loginTip.style.display="";setTimeout(function(){if(window.jQuery){jQuery(t.loginTip).fadeOut("slow")}else{t.loginTip.style.display="none"}},3000)},loginVerify:function(t,s){var u=t.data;u.loginTip.innerHTML='<span class="notice">'+s.reason+"，将跳转到登录页...</span>";u.loginTip.style.display="";setTimeout(function(){location.href="http://login.sina.com.cn/signup/signin.php?entry=acount&url="+encodeURIComponent(location.href)},3000)},comment:function(){var s=this;var y=s.dom;var v=b(y.content.value);v=v.replace(/\r\n/g,"<br/>");v=v.replace(/\n/g,"<br/>");v=v.replace(/\r/g,"<br />");v=v.replace(/\t/g,"!@");var w=y.toWeibo.getAttribute("toweibo");var u=e.dom.hasClass(document.getElementsByTagName("body")[0],"sinacMNT_weibo_login_security");if(!u){w=0}var t="http://comment5.news.sina.com.cn/cmnt/submit";var x={channel:s.channel||$globalInfo.news.channel,newsid:ARTICLE_DATA.customNewsId||s.newsid||$globalInfo.news.newsid,parent:s.mid,content:v,format:"json",ie:ARTICLE_DATA.encoding,oe:ARTICLE_DATA.encoding,ispost:w,share_url:ARTICLE_DATA.customShareUrl||location.href.split("#")[0],video_url:ARTICLE_DATA.video_url||"",img_url:ARTICLE_DATA.customImgUrl||"",iframe:1};e.app.post(t,x,function(z){s.commented(v,w);try{_S_uaTrack("entcomment","comment")}catch(A){}},function(){s.commentTip("error","评论超时，请稍候重试！")})},commentTip:function(t,s){var u=this.dom.commentTip;u.innerHTML='<p class="post_tip_'+t+'">'+s+"</p>";u.style.display="";setTimeout(function(){if(window.jQuery){jQuery(u).fadeOut("slow")}else{u.style.display="none"}},1500)},commented:function(y,K){var G=this;var P=G.mid;var N=G.dom;N.content.value="";G.toggleSubmitBtn();var A="http://weibo.com/u/";var M=$globalInfo.isWeiboLogin?"t_weibo":"";var I="";function H(){var T=$globalInfo.isWeiboLogin?'<a href="'+A+$globalInfo.uid+'" target="_blank">'+$globalInfo.weiboName+"</a>":$globalInfo.sinaNick;return T}function Q(){var V="http://i3.sinaimg.cn/dy/deco/2012/1018/sina_comment_defaultface.png";var U="http://login.sina.com.cn/member/my.php";var T=$globalInfo.sinaNick;if($globalInfo.isWeiboLogin){V=$globalInfo.profile_image_url;U="http://weibo.com/";T=$globalInfo.weiboName}return'<a href="'+U+'" title="'+T+'" target="_blank"><img src="'+V+'"/></a>'}function J(V,U){var T=V.parentNode;if(e.dom.hasClass(T,U)){return T}else{return J(T,U)}}var x=G.dom.wrap.getAttribute("cmnt-type");if(x=="outerReply"){var R=r("J_Comment_Item-"+G.mid);var D=f("J_Comment_Info",R)[0];var B=f("J_Comment_Reply",R)[0];var L=f("J_Comment_Txt",R)[0];var S=f("J_Comment_Face",R)[0];var C=B.innerHTML;var w=e.cmnt.data.get("cmntlist",P);var z=f("orig_index",B).length+1;var O=(w.area==""?"&nbsp;":"["+w.area+"]");var s="channel="+w.channel+"&newsid="+w.newsid+"&mid="+w.mid;var F='<span class="orig_index">'+z+'</span><div class="orig_user">'+n.get_user_lnk(w)+'<span class="orig_area">'+O+'</span></div><div class="orig_content">'+n.filterEmotionIco(i(w.content))+'</div><div class="orig_reply"  style="visibility: ;"><div class="reply">'+j(w.time,"datetime")+'<span class="reply-right"><a action-type="vote" action-data="'+s+'" href="javascript:;" voted="false" class="comment_ding_link" title="支持"><span>支持<em>('+w.agree+')</em></span></a> <a action-type="reply" action-data="'+s+'&type=innerReply" href="javascript:;" poped="false" class="comment_reply_link" title="回复">回复</a> <a href="javascript:;" action-type="shareHover" class="cmnt-share-tirgger" title="分享"><em>分享</em></a></span><span class="cmnt-share-btns J_Comment_Share_Btns"><a class="cmnt-share-btn-sina" href="javascript:;" action-type="share" action-data="'+s+'&site=sina">新浪</a><a class="cmnt-share-btn-qq" href="javascript:;"  action-type="share" action-data="'+s+'&site=tencent">腾讯</a></span></div></div>';C='<div class="comment_orig_content"><div class="orig_cont clearfix">'+C+F+"</div></div>";B.innerHTML=C;L.innerHTML=I+n.filterEmotionIco(i(y))+'</p><div class="reply">'+j("","datetime")+"</div>";D.innerHTML='<div class="t_info"> <span class="t_username '+M+'">'+H()+'</span><span class="t_area">&nbsp;</span></div>';S.innerHTML=Q();G.dom.wrap.style.display="none"}else{if(x=="comment"){var u=K==1?"并转发至微博":"";var F='<div class="comment_item"><div class="comment_item_cont clearfix"><div class="J_Comment_Face t_face">'+Q()+'</div><div class="t_content"><div class="J_Comment_Info"><div class="t_info"><span class="t_username '+M+'">'+H()+'</span><span class="t_area">&nbsp;</span></div></div><div class="comment_content J_Comment_Txt clearfix"><div class="t_txt">'+I+n.filterEmotionIco(i(y))+'</p></div><div class="comment_orig_content J_Comment_Reply">'+j("","datetime")+"</div></div></div></div></div>";var t=e.C("div");t.innerHTML=F;var E=r("J_Comment_List_Latest");E.insertBefore(t,E.firstChild);G.commentTip("succ","评论成功"+u);setTimeout(function(){if(G.dom.wrap.getAttribute("isFixed")=="1"){o(G.dom.wrap,"post_box_showall")}},2500);if(!(ARTICLE_DATA.hideCMNTList&&ARTICLE_DATA.hideCMNTList==1)){r("J_Comment_List_Wrap").style.display="";G.toLatestList()}}else{var F='<div class="orig_user"><span class="t_username '+M+'">'+H()+'</span><div class="orig_content">'+I+n.filterEmotionIco(i(y))+'</p><div class="reply">'+j("","orig_time")+"</div></div>";var t=e.C("div");t.className="orig_reply_wrap";t.innerHTML=F;var v=J(N.submit,"orig_cont");v.appendChild(t);G.dom.wrap.style.display="none"}}},toLatestList:function(){setTimeout(function(){var t=e.dom.getPosition(e.dom.byId("J_Comment_Wrap_Latest"));var s=t.top-300;if(window.jQuery&&!$globalInfo.ua.isIE6){jQuery("body,html").animate({scrollTop:s},500)}else{document.documentElement.scrollTop=s;document.body.scrollTop=s}},1500)}};return c});SAB.register("job.cmntFormBottom",function(b){var c=function(){var f=new b.job.cmntForm("J_Comment_Form_B");var e=document.getElementsByTagName("body")[0];var g=f.dom.wrap;var h=f.dom.content;b.evt.addEvent(g,"click",function(i){b.dom.addClass(g,"post_box_showall")});b.evt.addEvent(e,"click",function(j){if(g.getAttribute("isFixed")=="0"){return}if(typeof j=="undefined"){j=window.event}var i=j.target||j.srcElement;if(b.dom.contains(i,g)){b.dom.removeClass(g,"post_box_showall")}});return f};var a=b.evt.custEvent;a.add(b,"ce_cmntFirstRenderEnd",c)});SAB.register("job.vote",function(c){var e=c.app.splitNum;function b(){var g=c.dom.byId;var j=c.job.cmntList;var i=document.getElementsByTagName("body")[0];if(!i){return}var h=c.evt.delegatedEvent;var f=h(i);f.add("vote","click",function(n){var x=n.el;var v=x.getAttribute("voted");if(v=="true"){return}var m="http://comment5.news.sina.com.cn/cmnt/vote";var p={channel:n.data.channel||$globalInfo.news.channel,newsid:n.data.newsid||$globalInfo.news.newsid,parent:n.data.mid,format:"js",vote:1,callback:function(o){},domain:"sina.com.cn"};c.io.ijax.request(m,{POST:p,onComplete:function(o){}});var w=c.C("div");w.className="vote_tip";x.parentNode.appendChild(w);if(window.jQuery){jQuery(w).animate({opacity:"show",top:"-28"},"fast")}else{w.style.cssText=" ;display:block;top:-28px;"}setTimeout(function(){if(window.jQuery){jQuery(w).animate({opacity:"hide",top:"0"},"fast")}else{w.style.cssText=""}},800);c.dom.addClass(x,"comment_ding_link_active");var u=x.title;var t="已"+u;var s=x.innerHTML;var r=parseInt(s.replace(/[^\d]/g,""),10);var q=r+1;x.innerHTML=s.replace(e(r),e(q)).replace(u,t);x.title=t;x.setAttribute("voted","true")})}b();var a=c.evt.custEvent;a.add(c,"ce_cmntItemFirstRenderEnd",b)});SAB.register("job.cmntListHover",function(b){var c=function(){if(!window.jQuery){return}var g=jQuery;if(typeof g!="undefined"){var f=g("#J_Comment_Wrap");var e="comment_selected";f.delegate("div.orig_cont","mouseover",function(m){var j=g(this);var h=j.parents("div.comment_item");h.addClass(e);var i=j.find(".replay-right");if(i.length>0){i[0].style.visibility="visible"}});f.delegate("div.orig_cont","mouseout",function(i){var h=g(this).find(".replay-right");if(h.length>0){}});f.delegate("div.comment_item","mouseover",function(i){var h=g(this);h.addClass(e)});f.delegate("div.comment_item","mouseout",function(i){var h=g(this);h.removeClass(e)})}};var a=b.evt.custEvent;a.add(b,"ce_cmntItemFirstRenderEnd",c)});SAB.register("job.getmore",function(h){var o=h.dom.byId;var g=h.dom.byClass;var b=h.dom.removeClass;var i=h.util.reachBottom;var p=h.util.throttle;var j=h.evt.addEvent;var n=h.evt.custEvent;var m=h.evt.delegatedEvent;var c=0;var a=(function(){var s="J_CMNTMORE_PV_IFRAME";var q="http://comment5.news.sina.com.cn/comment/log.html";var r=document.getElementsByTagName("body")[0];return function(){var u=o(s);if(u){r.removeChild(u)}var t=h.C("div");t.style.display="none";t.id=s;t.innerHTML='<iframe class="invisible" scrolling="no" src="'+q+"?_t="+new Date().getUTCMilliseconds()+(""+Math.random()).substring(3)+'" allowTransparency="true" style="display:none;" frameborder="0"></iframe>';r.appendChild(t)}})();var e=["Latest","Hot"];var f={};f.moreToggle=(function(){var q={Hot:null,Latest:null};return function(s,r){if(!q[s]){q[s]=o("J_Comment_More_"+s)}q[s].style.display=r}})();f.hasMore=function(){var t=o("J_Comment_Wrap");var v=h.job.cmntList;var s=v.options;var r=s.param;var u=s.listType;if(!t||v.loading){return}var w=function(z){var x=g("J_Comment_Page_"+z,t,"div");var y=x[0];if(ARTICLE_DATA.clickMoreNum&&c>ARTICLE_DATA.clickMoreNum){return}if(x&&x.length>0){if(window.jQuery){jQuery(y).fadeIn()}else{y.style.display=""}b(y,"J_Comment_Page_"+z);if(x.length==1&&z=="Hot"){f.moreToggle(z,"none")}else{f.moreToggle(z,"")}c++}else{if(z!="Hot"){if(r.page*r.page_size<v.totalNum){r.page++;v.setType("latest");v.getData();f.moreToggle(z,"");c++}else{f.moreToggle(z,"none");v.dom.end.style.display=""}}else{f.moreToggle(z,"none")}}if(ARTICLE_DATA.clickMoreNum&&c>ARTICLE_DATA.clickMoreNum){f.moreToggle(z,"none");v.dom.end.innerHTML=v.dom.end.innerHTML.replace("已到最后一页，","");v.dom.end.style.display=""}n.fire(h,"ce_cmntShowMore")};if(u!="all"){w(u=="latest"?e[0]:e[1])}else{for(var q=e.length-1;q>=0;q--){w(e[q])}}};f.getmore=function(){var r=o("J_Comment_Wrap");if(!r){return}var s=h.job.cmntList;var q=m(r);q.add("getmore","click",function(u){var t=u.data.type;s.setType(t);f.hasMore();a()})};f.scrollLoad=function(){var q=h.job.cmntList;if(i()){q.setType("latest");f.hasMore();a()}};f.scrollEvent=function(){j(window,"scroll",function(){p(f.scrollLoad,f)})};n.add(h,"ce_cmntRenderEnd",f.hasMore);n.add(h,"ce_cmntFirstRenderEnd",f.getmore);n.add(h,"ce_cmntReload",function(){c=0});if(ARTICLE_DATA.scrollLoad){n.add(h,"ce_cmntFirstRenderEnd",f.scrollEvent)}return f});SAB.register("app.textareaUtils",function(c){var a={},b=document.selection;a.selectionStart=function(f){if(!b){return f.selectionStart}var j=b.createRange(),i,e,h=0;var g=document.body.createTextRange();g.moveToElementText(f);for(h;g.compareEndPoints("StartToStart",j)<0;h++){g.moveStart("character",1)}return h};a.selectionBefore=function(e){return e.value.slice(0,a.selectionStart(e))};a.selectText=function(e,f,g){e.focus();if(!b){e.setSelectionRange(f,g);return}var h=e.createTextRange();h.collapse(1);h.moveStart("character",f);h.moveEnd("character",g-f);h.select()};a.insertText=function(g,f,i,h){g.focus();h=h||0;if(!b){var j=g.value,n=i-h,e=n+f.length;g.value=j.slice(0,n)+f+j.slice(i,j.length);a.selectText(g,e,e);return}var m=b.createRange();m.moveStart("character",-h);m.text=f};a.getCursorPos=function(h){var g=0;if($globalInfo.ua.isIE){h.focus();var e=null;e=b.createRange();var f=e.duplicate();f.moveToElementText(h);f.setEndPoint("EndToEnd",e);h.selectionStart=f.text.length-e.text.length;h.selectionEnd=h.selectionStart+e.text.length;g=h.selectionStart}else{if(h.selectionStart||h.selectionStart=="0"){g=h.selectionStart}}return g};a.getSelectedText=function(f){var g="";var e=function(h){if(h.selectionStart!=undefined&&h.selectionEnd!=undefined){return h.value.substring(h.selectionStart,h.selectionEnd)}else{return""}};if(window.getSelection){g=e(f)}else{g=b.createRange().text}return g};a.setCursor=function(g,h,f){h=h==null?g.value.length:h;f=f==null?0:f;g.focus();if(g.createTextRange){var e=g.createTextRange();e.move("character",h);e.moveEnd("character",f);e.select()}else{g.setSelectionRange(h,h+f)}};a.unCoverInsertText=function(h,j,g){g=(g==null)?{}:g;g.rcs=g.rcs==null?h.value.length:g.rcs*1;g.rccl=g.rccl==null?0:g.rccl*1;var i=h.value,e=i.slice(0,g.rcs),f=i.slice(g.rcs+g.rccl,i==""?0:i.length);h.value=e+j+f;this.setCursor(h,g.rcs+(j==null?0:j.length))};return a});SAB.register("app.face",function(g){var c={iniTarget:null,srcInput:null,iconLayer:null,iconText:"",isShow:false,callback:function(){}};var b=ARTICLE_DATA.allFaces;function a(i){if(!c.isShow){return}var h=i.target||i.srcElement;if(h!=c.iniTarget&&!g.dom.contains(c.iconLayer,h)){c.hide()}}function f(n,p){p=p||"360px";b=b||{},list=[];var h=ARTICLE_DATA.allFacesBase;for(var m in b){list.push('<li><a href="javascript:void(0)" action-type="face-insert"action-data="text=['+m+']" title="'+m+'"><img src="'+h+b[m]+'.gif" alt="'+m+'" /></a></li>')}var j='<table class="article-layer"><tbody><tr> <td class="a-l-top-l"></td> <td class="a-l-top-c"></td> <td class="a-l-top-r"></td> </tr> <tr> <td class="a-l-m-l"></td> <td class="a-l-m-c"><div class="a-l-box"><div class="a-l-box-con" style="'+p+'"><div class="face-list clearfix"><div class="a-l-arrow"></div><div class="a-l-close-wrap"><a action-type="face-close" class="a-l-close" href="javascript:;" title="关闭"></a></div><div class="face-list-items"><ul id="J_Faces_Icos">'+list.join("")+'</ul></div></div></div></div></td><td class="a-l-m-r"></td></tr><tr><td class="a-l-btm-l"></td> <td class="a-l-btm-c"></td><td class="a-l-btm-r"></td></tr></tbody></table>';var o=g.C("div");o.innerHTML=j;o.style.display="none";(n||document.body).appendChild(o);return o}function e(r,t){if($globalInfo.ua.isIE){var p=r.createTextRange();p.collapse(true);if(r.caretPos){var o=r.caretPos;o.text=o.text.charAt(o.text.length-1)==" "?t+" ":t;p.moveStart("character",r.value.indexOf(t)+1);p.moveEnd("character",t.length-2)}else{var i=document.selection.createRange();document.selection.empty();i.text=t}}else{if(r.setSelectionRange){var h=r.selectionStart;var j=r.selectionEnd;var n=r.value.substring(0,h);var m=r.value.substring(j);var s=n+t,q=s.length;r.value=s+m;r.setSelectionRange(q,q)}else{r.value+=t}}}c.show=function(p,q,h,n,m,i,j){var r=c.iconLayer;var o;if(r){a()}c.wrap=c.wrap||null;if(!r||c.wrap!=h){r=f(h,i);c.wrap=h}if(j){callback=j}if(h&&h!=document.body){o=[0,0]}else{o=g.dom.getXY(p);o[1]+=p.offsetHeight}if($globalInfo.ua.isIE){o[0]+=-10}if(!isNaN(n)){o[0]+=n}if(!isNaN(m)){o[1]+=+m}r.style.cssText="left:"+o[0]+"px;top:"+o[1]+"px;position:absolute;z-index:1700;display:'';zoom:1;";c.iconLayer=r;c.iniTarget=p;c.srcInput=q;c.iconText=null;c.isShow=true;g.dom.addClass(p,"cmnt-emotion-trigger-active");g.evt.addEvent(document.body,"click",a,false);return c.iconLayer};c.hide=function(){var h=c.iconLayer;h&&(h.style.display="none");if(c.iniTarget){g.dom.removeClass(c.iniTarget,"cmnt-emotion-trigger-active")}g.evt.removeEvent(document.body,"click",a);c.isShow=false;return h};c.getFace=function(){return c.iconText};c.insert=function(i,h){var j=c.srcInput;if(i){c.hide();if(j){j.focus();setTimeout(function(){var m=j.getAttribute("range");if(m==null){e(j,i)}else{var o=m.split("&");g.app.textareaUtils.unCoverInsertText(j,i,{rcs:o[0],rccl:o[1]});var n=g.app.textareaUtils.getCursorPos(j,i);j.setAttribute("range",n+"&0")}if(h){h()}},10)}}};return c});SAB.register("job.face",function(e){if(ARTICLE_DATA.hideFaces){return}var h=e.dom.byId;var i=e.app.face;var j=false;var c=function(){var o=document.getElementsByTagName("body")[0];if(!o||j){return}var n=e.evt.delegatedEvent;var m=n(o);m.add("face-toggle","click",function(v){var u=v.el;var q=h(v.data.id).getElementsByTagName("textarea")[0];var w="";var t=-25;var s=5;if(v.data.wrap){w=h(v.data.wrap);t=-2;s=165}var r="360";var p=null;i.show(u,q,w,t,s,r,p)});m.add("face-insert","click",function(q){var p=q.data.text;var r=q.data.input;if(r){i.srcInput=h(r).getElementsByTagName("textarea")[0]}i.insert(p)});m.add("face-close","click",function(q){var p=i.iconLayer;i.hide()});j=true};var a=e.evt.custEvent;a.add(e,"ce_cmntItemFirstRenderEnd",c);a.add(e,"ce_cmntFirstRenderEnd",c);var b;var g=function(){if(!b){b=e.dom.byClass("cmnt-emotion-trigger","J_Comment_Form_B")[0]}};var f=function(m){var n="id=J_Comment_Form_B";g();if(m=="fix"){n+="&wrap=J_Comment_Form_B"}b.setAttribute("action-data",n)};a.add(e,"ce_cmntFormReset",function(){f("reset")});a.add(e,"ce_cmntFormFix",function(){f("fix")})});SAB.register("job.editor",function(c){var a=function(){var i=c.app.textareaUtils;var f=c.dom.byId("J_Comment_Wrap");if(!f){return}var e=c.evt.delegatedEvent;var h=e(f);var g=function(m){var n=i.getSelectedText(m);var o=(n==""||n==null)?0:n.length;var p=i.getCursorPos(m);var j=p+"&"+o;m.setAttribute("range",j)};h.add("editor-change","keyup",function(j){g(j.el)});h.add("editor-change","mouseup",function(j){g(j.el)})};var b=c.evt.custEvent;b.add(c,"ce_cmntItemFirstRenderEnd",a)});SAB.register("job.cmntFix",function(g){if($globalInfo.ua.isIOS||!ARTICLE_DATA.cmntFix){return}var c=g.evt.custEvent;var b=g.evt.addEvent;var h=g.dom.addClass;var f=g.dom.removeClass;var e=$globalInfo.ua.isIE;var i=null;var a=function(){var s=g.dom.byId("J_Comment_Form_B");var n=g.dom.byId("J_Comment_List_Wrap");var p=s.parentNode;var q=false;var t="post_box_showall";var m=function(v,w){for(var u in w){v.style[u]=w[u]}return v};var r=function(u){var v="none";if(!i){i=g.C("div");i.style.height=s.offsetHeight+"px";p.insertBefore(i,s);m(i,{display:v})}if(u){v=""}m(i,{display:v})};s.setAttribute("isFixed","0");p.style.position="relative";if(window.XMLHttpRequest){var j=function(){var w=p.offsetTop+s.offsetHeight;var u=document.documentElement.scrollTop||document.body.scrollTop;var v=n.offsetHeight;if((u>=w)&&(u<w+v)){if(s.getAttribute("isFixed")=="1"&&!e){return}m(s,{position:"fixed",top:0,left:"50%",marginLeft:"-475px"});r(true);f(s,t);s.setAttribute("isFixed","1");h(p,"blkCommentBoxFix");c.fire(g,"ce_cmntFormFix")}else{if(s.getAttribute("isFixed")=="0"&&!e){return}m(s,{position:"static",left:"0",marginLeft:"0"});r(false);h(s,t);s.setAttribute("isFixed","0");f(p,"blkCommentBoxFix");c.fire(g,"ce_cmntFormReset")}}}else{var j=function(){var x=s.offsetHeight;var w=p.offsetTop+x;var u=document.documentElement.scrollTop||document.body.scrollTop;var v=n.offsetHeight;if((u>=w)&&(u<w+v)){m(s,{position:"absolute",top:u-w+x+"px"});r(true);s.setAttribute("isFixed","1");f(s,t);h(p,"blkCommentBoxFix6");c.fire(g,"ce_cmntFormFix")}else{m(s,{position:"static",top:0});r(false);s.setAttribute("isFixed","0");h(s,t);f(p,"blkCommentBoxFix6");c.fire(g,"ce_cmntFormReset")}}}var o=false;b(window,"scroll",function(){if(!o){j();o=true}else{clearTimeout(o);setTimeout(function(){j()},50)}})};var c=g.evt.custEvent;c.add(g,"ce_cmntFirstRenderEnd",function(){setTimeout(function(){a()},2*1000)})});SAB.register("job.quickReply",function(c){function b(){var h=c.dom.byId;var m=c.job.cmntList;var g=c.evt.addEvent;var j=document.getElementsByTagName("body")[0];if(!j){return}var f=c.evt.custEvent;var i=c.evt.delegatedEvent;var e=i(j);var n=c.module.login;e.add("reply","click",function(u){var D=u.el;var C=u.data.mid;var p=u.data.newsid;var A=u.data.channel;var q=u.data.parMid||"comment";var B="J_Comment_Form_"+C+"_"+q+"_"+p+"_"+A;var s=h(B);var w='<div class="box_border_top_cont"><div class="box_border_top"> <em>◆</em><span>◆</span></div></div><div class="post_box post_box_show"><form class="J_Comment_Form" name="post_form_inline"><div class="post_box_cont clearfix"><textarea  name="content" placeholder="请输入评论内容" class="J_Comment_Content"></textarea><div class="J_Comment_Tip post_tip" style="display:none;"><p class="post_tip_error">请输入评论内容</p></div></div></form><div class="cmnt_user_cont clearfix"><div class="cmnt-emotion-btns J_Logined"><a class="cmnt-emotion-trigger" href="javascript:;" action-type="face-toggle" action-data="id='+B+'"></a></div><div class="cmnt_name J_Unlogin" style="display:none;"><input class="form_input_long J_Login_User" autocomplete="off" placeholder="微博账号/博客/邮箱" name="user"/></div><div class="cmnt_password J_Unlogin" style="display:none;"><input type="password" class="form_input_long J_Login_Psw"  autocomplete="off" placeholder="请输入密码" name="pass"/></div><div class="cmnt_user_link J_Unlogin" style="display:none;"><label class="cmnt_remeber share_wt" action-type="simcheck" action-data="type=remeberme"><span class="J_Login_Remeber to_mb to_mb_selected" remeberme="1"></span>下次自动登录</label><a class="cmnt_user_login J_Login_Submit" href="javascript:;">登录</a></div><div class="cmnt_user_login_info J_Login_Tip" style="display:none"><span class="notice">用户名/密码错误</span></div><a class="J_Comment_Submit post_inline_comment post_inline_comment_disbled" href="javascript:;"></a><div class="cmnt_user_other J_WeiboLogined" style="display:none;"><a class="ccto_link" href="#url">@TA</a><label class="share_wt J_Comment_ToWeibo_Wrap" action-type="simcheck" action-data="type=toweibo"><span class="to_mb J_Comment_ToWeibo" toweibo="0"></span>分享到微博</label></div><div class="cmnt_user J_Logined" style="display:none;"><a target="_blank" href="#url" class="J_Login_Ico"><img src="http://img.t.sinajs.cn/t4/style/images/common/transparent.gif" title="微博" alt="weibo" class="username_icon"></a><span class="J_Name">用户名</span>&nbsp;|&nbsp;<a class="J_Login_Logout" title="退出登录" onclick="return false;"  href="javascript:;">退出</a></div></div></div>';function x(F,E){var o=F.parentNode;if(c.dom.hasClass(o,E)){return o}else{return x(o,E)}}if(u.data.type=="innerReply"){var t=x(D,"orig_cont")}else{var t=h("J_Comment_Item-"+C)}if(1){var z=c.C("div");z.style.display="none";z.id=B;z.className="cmnt_inline_post_box";z.setAttribute("cmnt-type",u.data.type);z.innerHTML=w;t.appendChild(z);if($globalInfo.isWeiboLogin){n.showWeiboLogined(t)}if($globalInfo.isLogin){n.showLogined(t)}else{n.showUnlogined(t)}s=h(B);var v=new c.job.cmntForm(B)}if($globalInfo.curReplyForm!=B){var r=h($globalInfo.curReplyForm);if(r){r.style.display="none"}}$globalInfo.curReplyForm=B;var y=c.dom.byClass("J_Comment_Content",s)[0];if(s.style.display!=="none"){if(window.jQuery&&!$globalInfo.ua.isIE6){jQuery(s).slideUp("fast","linear",function(){s.setAttribute("poped","false")})}else{s.style.display="none";s.setAttribute("poped","false")}}else{if(window.jQuery&&!$globalInfo.ua.isIE6){jQuery(s).slideDown("fast","linear",function(){s.setAttribute("poped","true");y.focus()})}else{s.style.display="";s.setAttribute("poped","true");y.focus()}}})}var a=c.evt.custEvent;a.add(c,"ce_cmntItemFirstRenderEnd",b)});SAB.register("job.sideFix",function(h){var b=h.dom.byId,i=h.dom.addClass,e=h.dom.removeClass,g=h.evt.addEvent,f="side-btns-wrap-resize";resizeClz2mw="side-btns-2wm-resize";var a=function(){var s=document,p=(function(){var x=s.body,A=x.firstChild,u=h.E("div");var z=h.job.cmntList;var C="";if(z.data.news&&z.data.news.status!=="N_CLOSE"){var B="http://comment5.news.sina.com.cn/comment/skin/default.html";var y=z.data.count.total;var v=0;var D=' href="#J_Comment_Wrap" action-type="anchorGo" ';if(parseInt(y)>99999){y="99,999+"}else{y=h.app.splitNum(y)}if(location.href.indexOf("http://news.sina.com.cn/")!=-1){v=-50}if(ARTICLE_DATA.hideCMNTList){D=' href="'+B+"?channel="+$globalInfo.news.channel+"&newsid="+$globalInfo.news.newsid+'" '}C='<div suda-uatrack="key=entcomment&value=gotocomment" id="cmnt_btn" class="cmnt_btn"> <a title="发表评论" action-data="y='+v+'" class="cmnt_link" '+D+">"+y+"</a></div>"}var w='<div id="weibo_btn" class="weibo_btn"> <a href="javascript:;" onclick="return false;" class="wt_link" title="分享到微博">分享到微博</a> </div>'+C+'<div suda-uatrack="key=up_to_top&value=clicktimes" id="top_btn" class="top_btn" style="visibility:hidden;"> <a title="返回顶部" href="javascript:;" class="toplink">TOP</a> </div>';var u=h.C("div");u.className="side-btns-wrap";u.innerHTML=w;A?A.parentNode.insertBefore(u,A):x.appendChild(u);return u})(),n=function(){var u=s.documentElement.scrollTop||s.body.scrollTop,v=(u>0?"visible":"hidden");t.style.visibility=v;if($globalInfo.ua.isIE6){p.style.top=u+s.documentElement.clientHeight-225}},j=function(){var u=s.documentElement||s.body;if(!u){return}var v=u.offsetWidth;if(v<1074){i(p,f)}else{e(p,f)}},r=function(){s.documentElement.scrollTop=0;s.body.scrollTop=0},q=function(){var v=h.dom.byId("artibodyTitle").innerHTML||document.title.split("_")[0];if(ARTICLE_DATA.video_url){v+=" 视频："+ARTICLE_DATA.video_url}window.open("http://service.t.sina.com.cn/share/share.php?url="+encodeURIComponent(location.href)+"&title="+encodeURIComponent(v)+"&ralateUid="+ARTICLE_DATA.uid+"&searchPic=true","_blank","width=615,height=505");try{_S_uaTrack("newslefttoweibo","click")}catch(u){}};var m=b("weibo_btn");var o=b("cmnt_btn");var t=b("top_btn");g(t,"click",r);g(m,"click",q);g(window,"scroll",n);g(window,"resize",j);j();n()};var c=h.evt.custEvent;c.add(h,"ce_cmntFirstRenderEnd",a)});SAB.register("app.dataLoader",function(a){var b=function(e){var c=this;c.inited=false;c.isReflash=true;c.options=c._setOptions(e)};b.prototype={init:function(){this._init()},_init:function(){var c=this;c.inited=true;c.data="";c.loading=false;c.getData()},_setOptions:function(c){var e=this.defaults={url:"",param:"",interval:0,beforeLoad:function(){},loaded:function(f){},error:function(f){}};return a.clz.extend(e,c,true)},getData:function(){var c=this;var f=c.options;var e=f.url;var i=f.param;function h(){if(f.interval>0){c.setTimeout=null;c.setTimeout=setTimeout(function(){c.getData()},f.interval)}}function g(){a.io.jsload.request(e,{GET:i,onComplete:function(m){if(typeof m=="undefined"){return}if(m.result.status.code==0){c.data=m.result;f.loaded(c);h()}else{var j=m.result.status.msg;f.error(j);h()}c.loading=false}})}if(c.isReflash){c.loading=true;f.beforeLoad(c);g()}else{h()}},reflash:function(c){this.isReflash=c}};return b});SAB.register("job.cmntList",function(e){var o="http://comment5.news.sina.com.cn/page/info";var f=ARTICLE_DATA.info_type;var i=ARTICLE_DATA.user_uid||"";var m=sinaSSOController.getSinaCookie();if(f==2){if(!m||(m&&i&&i!==m.uid)){location.href=location.href.replace("info_type=2","info_type=1")}}if(f!=0&&!m&&!i){location.href="http://login.sina.com.cn/signup/signin.php?r="+encodeURIComponent(location.href)}if(m){i=i||m.uid}if(f==1){o="http://comment5.news.sina.com.cn/user/cmnt?uid="+i}else{if(f==2){o="http://comment5.news.sina.com.cn/user/reply?uid="+i}}var p=e.cmnt.util;var h=e.app.updateTime;var q=e.dom.byId;var b=e.evt.custEvent;var a=10*1000;var n=function(){if((j.loading||!j.data)&&ARTICLE_DATA.newsid!=""){try{_S_uaTrack("page_comment","timeout")}catch(r){}}};var c={version:1,format:"js",channel:ARTICLE_DATA.channel,newsid:ARTICLE_DATA.newsid,group:ARTICLE_DATA.group||ARTICLE_DATA.style,compress:1,ie:ARTICLE_DATA.encoding,oe:ARTICLE_DATA.encoding,page:1,page_size:ARTICLE_DATA.pageSize};var j=new e.app.dataLoader({url:o,param:c,listType:"all",beforeLoad:function(r){r.beforeLoad()},loaded:function(r){j.render();j.loaded()}});j.firstRender=true;j.getDom=function(){var r={wrap:q("J_Comment_List_Wrap"),latest:q("J_Comment_List_Latest"),hot:q("J_Comment_List_Hot"),loading:q("J_Comment_Loading"),more_hot:q("J_Comment_More_Hot"),more_latest:q("J_Comment_More_Latest"),end:q("J_Comment_End")};return r};j.beforeLoad=function(){var r=this.dom=this.getDom();r.loading.style.display="";r.end.style.display="none"};j.loaded=function(){var r=this;var t=this.dom;var s=this.options.listType;t.loading.style.display="none";b.fire(e,"ce_cmntRenderEnd");if(r.firstRender){h(r.dom.wrap);b.fire(e,"ce_cmntFirstRenderEnd");r.firstRender=false}};j.render=function(){var D=this;var v=D.data;var u=D.dom;var r=D.options;var t=D.options.param;var z=r.listType;D.setNewsData(v);if(typeof v.count=="undefined"){D.totalNum=0}else{D.totalNum=D.data.count.show}D.isSummary=(ARTICLE_DATA.isBBS&&ARTICLE_DATA.style);var B=D.isSummary;var A=v.newsdict;b.fire(e,"ce_cmntRenderStart");var w=v.cmntlist;var E=v.hot_list;if(w.length==0){return}if(D.cList){D.cList=D.cList.concat(w)}else{D.cList=w}D.cList=D.cList.concat(E);var y=v.replydict;if(z=="all"){var s=p.cmntListRender(E,{type:"hot",data:v});var C=p.cmntListRender(w,{type:"latest",data:v});u.hot.innerHTML=s;u.latest.innerHTML=C}else{if(z=="latest"){var C=p.cmntListRender(w,{type:"latest",data:v});if(t.page==1){u.latest.innerHTML=C}else{var x=e.C("div");x.innerHTML=C;u.latest.appendChild(x)}}else{var s=p.cmntListRender(E,{type:"hot",data:v});u.hot.innerHTML=s}}D.loading=false;return D};j.empty=function(){this.dom.wrap.innerHTML="";return this};j.setNewsData=function(s){var r=e.cmnt.data;if(s){if(s.news){r.set("newsdict",[s.news])}if(!e.obj.isEmpty(s.newsdict)){r.set("newsdict",s.newsdict)}r.set("cmntlist",s.cmntlist);if(s.hot_list){r.set("cmntlist",s.hot_list)}r.set("replydict",s.replydict)}if(s){if(s.news){$globalInfo.news=s.news}if(!e.obj.isEmpty(s.newsdict)){$globalInfo.newsdict=s.newsdict}}return this};j.setPage=function(r){if(r<1){return this}this.options.param.page=r;return this};j.setType=function(r){if(r!="all"&&r!="hot"&&r!="latest"){return}this.options.listType=r;return this};var g=function(){setTimeout(function(){n()},a);j.init();try{_S_uaTrack("entcomment","pageview")}catch(r){}};b.add(e,"ce_cmntHtmlInit",g);return j});SAB.register("job.cmntSimChkbox",function(e){var a=false;function c(){if(a){return}var i=document.getElementsByTagName("body")[0];if(!i){return}var j=e.dom.addClass;var m=e.dom.removeClass;var h="to_mb_selected";var g=e.evt.delegatedEvent;var f=g(i);f.add("simcheck","click",function(s){var r=s.el;var p=s.data.type;var n=r.getElementsByTagName("span")[0];var q=n.getAttribute(p)=="0"?1:0;if(q){j(n,h)}else{m(n,h)}n.setAttribute(p,q)});a=true}var b=e.evt.custEvent;b.add(e,"ce_cmntHtmlInit",c);b.add(e,"ce_cmntItemFirstRenderEnd",c)});SAB.register("job.cmntStructure",function(e){var a=(function(){var g=document;var f=g.getElementsByTagName("head")[0];return function(h,j){var i=g.getElementById(j);if(i){i.parentNode.removeChild(i)}i=g.createElement("style");i.id=j;i.type="text/css";i.styleSheet?(i.styleSheet.cssText=h):i.appendChild(g.createTextNode(h));f.appendChild(i);return i}})();var c=function(){var u=[];var s=function(j){u.push(j)};var o=[];var v=62;var m=0;if(ARTICLE_DATA.hideHead){m+=v}if(ARTICLE_DATA.width){var g=ARTICLE_DATA.width;o.push(".blkContainerCommentblk,.Mblk_cmnt{width:"+g+"px}");o.push(".Mblk_cmnt .comment_loading span,.Mblk_cmnt .comment_tip span{width:"+(g-40)+"px!important;}");o.push(".Mblk_cmnt .t_txt{width:"+(g-113+m)+"px!important;}");o.push(".Mblk_cmnt .comment_item_cont .t_content{width:"+(g-110+m)+"px!important;}");o.push(".Mblk_cmnt .post_box textarea{width:"+(g-72)+"px!important;}");o.push(".Mblk_cmnt .post_box_top{width:"+(g-30)+"px!important;}");o.push(".Mblk_cmnt .post_box_showall textarea {width:"+(g-56)+"px!important;}");o.push(".Mblk_cmnt .post_box_show textarea {width:"+(g-56)+"px!important;}");o.push(".orig_cont .post_box_show textarea{ width:97%!important;}")}if(ARTICLE_DATA.replyTextAreaWidth&&ARTICLE_DATA.replyTextAreaWidth.indexOf("%")!==-1){o.push(".orig_cont .post_box_show textarea{ width:"+ARTICLE_DATA.replyTextAreaWidth+"!important;;}")}if(ARTICLE_DATA.cmntFixOffsetX){o.push("div.blkCommentBoxFix .post_box_top{margin-left:"+ARTICLE_DATA.cmntFixOffsetX+"px !important;}")}if(ARTICLE_DATA.hideFaces){o.push(".cmnt-emotion-btns{display:none !important;}")}if(ARTICLE_DATA.inputWidth){o.push(".blkContainerCommentblk .form_input_long{width:"+ARTICLE_DATA.inputWidth+"px !important;}")}if(ARTICLE_DATA.hideCount){o.push(".Mblk_cmnt .post_box_count{display:none !important;}")}a(o.join(""),"J_Comment_CustomStyle");var p=[];p.push(".Mblk_cmnt .comment_orig_content .box_border_top{right:15px;}");p.push("div.comment_item .reply .vote_tip{right:69px;}");p.push("div.Mblk_cmnt .box_border_top{right:35px;}");p.push(".J_Comment_ToWeibo_Wrap,.cmnt-share-tirgger{display:none;}");p.push(".sinacMNT_weibo_login_security .cmnt-share-tirgger{display:inline-block;}");p.push(".sinacMNT_weibo_login_security .J_Comment_ToWeibo_Wrap{display:inline;}");p.push(".sinacMNT_weibo_login_security  div.Mblk_cmnt .box_border_top{right:90px;}");p.push(".sinacMNT_weibo_login_security  div.comment_item .reply .vote_tip{right:124px;}");p.push(".sinacMNT_weibo_login_security .Mblk_cmnt .comment_orig_content .box_border_top{right:70px;}");a(p.join(""),"J_Comment_LoginStyle");var r=function(){s("<!-- 浮动评论框 -->");var j="";if(ARTICLE_DATA.info_type==1||ARTICLE_DATA.info_type==2){j='style="display:none"'}s('<div class="post_box post_box_top post_box_showall" '+j+' id="J_Comment_Form_B" cmnt-type="comment" isfixed="0" style="position: static; left: 0px; margin-left: 0px; top: 0px; ">');s('<p id="J_Post_Box_Count" class="post_box_count">'+(q?'<span rel="欢迎发表评论" class="more J_Comment_Count_Txt" style="display:none;">欢迎发表评论</span>':'<a href="#J_Comment_Wrap" rel="欢迎发表评论" class="more J_Comment_Count_Txt" style="display:none;">欢迎发表评论</a>')+"</p>");s('<div class="post_box_cont clearfix">');s('<textarea class="J_Comment_Content" placeholder="'+ARTICLE_DATA.postPlaceholder+'" name="content">'+ARTICLE_DATA.postContent+"</textarea>");s('<div class="J_Comment_Tip post_tip" style="display:none;">');s('<p class="post_tip_error">请输入评论内容</p>');s("</div>");s("</div>");s('<div class="cmnt_user_cont clearfix">');s('<div class="cmnt-emotion-btns J_Logined" style="display:none;">');s('<a class="cmnt-emotion-trigger" href="javascript:;" action-type="face-toggle" action-data="id=J_Comment_Form_B"></a>');s("<span>");s(i.join(""));s("</span></div>");s('<div class="cmnt_name J_Unlogin" style="display: none; ">');s('<input name="user" autocomplete="off" placeholder="微博账号/博客/邮箱" class="form_input_long  J_Login_User"></div>');s('<div class="cmnt_password J_Unlogin" style="display: none; ">');s('<input type="password" name="psw" class="form_input_long J_Login_Psw" placeholder="请输入密码"></div>');s('<div class="cmnt_user_link J_Unlogin" style="display: none; ">');s('<label class="cmnt_remeber share_wt" action-type="simcheck" action-data="type=remeberme">');s('<span class="J_Login_Remeber to_mb to_mb_selected" remeberme="1"></span>');s("下次自动登录");s("</label>");s('<a class="cmnt_user_login J_Login_Submit" href="javascript:;">登录</a>');s("<a href=\"https://login.sina.com.cn/signup/signup.php\" onclick=\"try{if(window._S_uaTrack){_S_uaTrack('entcomment', 'logon');}}catch(e){}\">注册</a>");s(" | ");s('<a href="https://login.sina.com.cn/getpass.html">忘记密码？</a>');s("</div>");s('<div class="cmnt_user_login_info J_Login_Tip" style="display:none;">');s('<span class="notice">用户名/密码错误</span>');s("</div>");s('<a href="javascript:;" onclick="return false;" class="J_Comment_Submit post_inline_comment post_inline_comment_disbled">发布</a>');s('<div class="cmnt_user_other J_WeiboLogined" style="display:none;">');s('<a href="#url" class="ccto_link">@TA</a>');s('<label class="share_wt J_Comment_ToWeibo_Wrap" action-type="simcheck" action-data="type=toweibo">');s('<span class="to_mb J_Comment_ToWeibo" toweibo="0"></span>');s("分享到微博");s("</label>");s("</div>");s('<div class="cmnt_user J_Logined" style="display:none;">');s('<a class="J_Login_Ico" href="http://weibo.com" target="_blank">');s('<img src="http://img.t.sinajs.cn/t4/style/images/common/transparent.gif" title="微博" alt="weibo" class="weibo_icon">');s("</a>");s('<span class="J_Name">');s('<a href="http://weibo.com" target="_blank">用户名</a>');s("</span>");s(" | ");s('<a class="J_Login_Logout" href="javascript:;" onclick="return false;" title="退出登录">退出</a>');s("</div>");s("</div>");s("</div>");s("<!-- /浮动评论框 -->")};var q=ARTICLE_DATA.isBBS;var h=ARTICLE_DATA.commonFaces;var i=[];for(var n in h){i.push('<a href="javascript:void(0)" action-type="face-insert" action-data="input=J_Comment_Form_B&text=['+n+']" title="'+n+'"><img src="'+ARTICLE_DATA.commonFacesBase+h[n]+'.gif" alt="" /></a> ')}s('<div id="J_Comment_CP_Tip" class="comment_tip_o" style="display:none;"> <p>新浪警示：任何收费预测彩票会员等广告皆为诈骗，请勿上当！<a href="http://sports.sina.com.cn/l/2012-07-31/11376158457.shtml" target="_blank">点击进入详情</a></p> </div>');s('<div class="Mblk_cmnt blkCommentBox" style="position: relative; ">');if(ARTICLE_DATA.formPosition=="top"){r()}s('<div class="b_cont2" id="J_Comment_List_Wrap" style="display:none;">');s('<div id="J_Comment_Tip" class="comment_item comment_tip" style="display:none;">');s("<span>还没有评论</span>");s("</div>");s('<div id="J_Comment_Wrap_Hot" style="display:none;">');s('<div class="c_title">');s('<span class="cmenu">最热评论</span>');s('<a href="javascript:;" onclick="return false;" class="cmnt-reflash-btn" action-type="reload" action-data="type=Hot">刷新</a>');s("</div>");s('<div class="b_txt" id="J_Comment_List_Hot">');s("</div>");s('<div id="J_Comment_More_Hot" class="comment_item comment_more" action-type="getmore" action-data="type=hot" style="display:none; ">');s('<a href="javascript:;" onclick="return false;">显示更多热评</a>');s("</div>");s("</div>");s('<div id="J_Comment_Wrap_Latest" style="display:none;">');if(!(ARTICLE_DATA.info_type==1||ARTICLE_DATA.info_type==2)){s('<div class="c_title">');s('<span class="cmenu">最新评论</span>');s('<a href="javascript:;" onclick="return false;" class="cmnt-reflash-btn" action-type="reload" action-data="type=Latest">刷新</a>');s("</div>")}s('<div class="b_txt" id="J_Comment_List_Latest">');s("</div>");s('<div id="J_Comment_More_Latest" class="comment_item comment_more" action-type="getmore" action-data="type=latest" style="display:none; ">');var t="点击加载更多评论";if(ARTICLE_DATA.scrollLoad){t="滚动加载更多评论"}s('<a href="javascript:;" onclick="return false;">'+t+"</a>");s("</div>");s("</div>");s('<div id="J_Comment_Loading" class="comment_item comment_loading" style="display:none; ">');s("<span>");s('<img src="http://i3.sinaimg.cn/ent/deco/2012/0912/images/indicator_24.gif" height="24" width="24" alt="" style="vertical-align:middle;">评论加载中，请稍候...</span>');s("</div>");s('<div id="J_Comment_End" class="comment_item comment_more" style="display: none; ">');s(q?"<span>已到最后一页</span>":'<a href="javascript:;" target="_blank">查看更多精彩评论&gt;&gt;</a>');s("</div>");s("</div>");if(ARTICLE_DATA.formPosition!=="top"){r()}s('<div class="Mblk_cmnt_bg"></div>');s("</div>");var f=e.dom.byId("J_Comment_Wrap");if(f){f.innerHTML=u.join("");return f}else{return null}};var b=e.evt.custEvent;e.dom.ready(function(){if(c()){b.fire(e,"ce_cmntHtmlInit");if($globalInfo.isWeiboLogin){b.fire(e,"ce_weiboLogin")}if($globalInfo.isLogin){b.fire(e,"ce_login")}else{b.fire(e,"ce_logout")}}})});SAB.register("job.autoLogin",function(a){if(!ARTICLE_DATA.autoLogin){return}a.dom.ready(function(){a.app.autoLogin();var b=setInterval(function(){a.app.autoLogin()},ARTICLE_DATA.autoLoginInterval)})});SAB.register("job.article",function(a){a.dom.ready(function(){var o=this;var t=o.dom;var b=a.dom;var c=b.byId;var v=b.byClass;var m=b.addClass;var n=b.removeClass;var h=a.util.cookie;var j=c("J_Article_Wrap");if(!j){return}var f=a.evt.addEvent;var q=a.evt.delegatedEvent;var s=q(j);var g=function(x,w){this.init(x,w)};g.prototype={init:function(x,w){this.fontSize=14;this.getDom(x,w);this.byCookie();this.bindEvent()},byCookie:function(){var x=this;var w=h.getCookie("ArtiFSize");var y=$globalInfo.ua.isIOS?16:14;w=w&&!isNaN(w)?parseInt(w):y;w=(w>18||w<14)?14:w;x.fontSize=w;x.zoom();x.trigger_render()},getDom:function(z,w){var y=c(z);if(!y){return}var x=v("J_Font_Zoomer_Trigger",y,"a");t={wrap:y,up:x[1],down:x[0],body:c("artibody")};this.dom=t},bindEvent:function(){var w=this;s.add("fontZoom","click",function(y){var x=y.data.type;w.zoom(x);w.trigger_render()})},trigger_render:function(){var x=this.dom;var w=this.fontSize;if(w==18){m(x.up,"font_up_disable");n(x.down,"font_down_disable");x.up.title=""}else{if(w==14){m(x.down,"font_down_disable");n(x.up,"font_up_disable");x.down.title=""}else{n(x.up,"font_up_disable");n(x.down,"font_down_disable");x.up.title="加大字号";x.down.title="减小字号"}}},zoom:function(z){var x=this;var y=x.fontSize;var w=parseInt(y);if(z=="up"&&y!=18){w=parseInt(y+2)}else{if(z=="down"&&y!=14){w=parseInt(y-2)}}x.fontSize=w;x.dom.body.className="BSHARE_POP blkContainerSblkCon clearfix blkContainerSblkCon_"+w;h.setCookie("ArtiFSize",w,10*24,"/",".sina.com.cn")}};var p=new g("J_Font_Zoomer","artibody");s.add("savePage","click",function(x){var w=x.data.url;if(typeof w!="string"){w=window.location.href}window.open("http://roll.news.sina.com.cn/savepage/save.php?url="+encodeURIComponent(w),"savePage")});s.add("closePage","click",function(w){window.open("","_self","");window.close()});var e=new Object();e.data={playerCode:""};var i=function(){if(c("myMovie")){if(c("J_Article_Player").childNodes[0].tagName=="OBJECT"){var y=new Array();var w=new Array();w[0]=sinaBokePlayerConfig_o.playerWidth;w[1]=sinaBokePlayerConfig_o.playerHeight;w[4]="";for(var x=0;x<c("myMovie").childNodes.length;x++){y[x]=new Array();y[x][0]=c("myMovie").childNodes[x].name;y[x][1]=c("myMovie").childNodes[x].value;if(y[x][0]=="movie"){w[2]=y[x][1]}else{if(y[x][0]=="flashvars"){w[3]=y[x][1]}}}c("J_Article_Player").innerHTML="";e.data.playerCode='<embed width="'+w[0]+'" height="'+w[1]+'" flashvars="'+w[3]+'" src="'+w[2]+'" allowscriptaccess="always" wmode="transparent" allowfullscreen="true" quality="high" name="myMovie" id="myMovie" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />';c("J_Article_Player").innerHTML=e.data.playerCode}else{e.data.playerCode=c("J_Article_Player").innerHTML}}};function r(){if(typeof forSPrint=="object"&&forSPrint.Print){forSPrint.Print()}}function u(){i();var w="http://ent.sina.com.cn/js/470/20120917/print.js";w+="?t="+(new Date()).getTime();var x=document.createElement("script");x.setAttribute("src",w);x.setAttribute("type","text/javascript");x.setAttribute("id","sinaPrintJsUrl");x.onreadystatechange=function(){if(x.readyState=="loaded"){r()}};x.onload=r;document.getElementsByTagName("head")[0].appendChild(x)}s.add("printPage","click",function(w){u()})})});SAB.register("job.toggleAD",function(f){var g=ARTICLE_DATA.pagepubtime;var e=ARTICLE_DATA.difDay;var c=ARTICLE_DATA.ADIDs;var h=ARTICLE_DATA.iPadADIDS||[];function b(){DateTime=new Array();DateTime=g.split("-");var o=DateTime[0];var p=DateTime[1];var j=DateTime[2];var i=new Date(o,p-1,j);var m=new Date();var n=m.getTime()-i.getTime();if(n>e*24*60*60*1000){return false}return true}function a(){var m=null;var j=b();for(var n=c.length-1;n>=0;n--){m=f.dom.byId(c[n]);if(j){if(!m||(f.arr.inArray(c[n],h)&&$globalInfo.ua.isIOS)){continue}m.style.display="block"}}}f.dom.ready(function(){a()})});if($globalInfo.SABLoaded){SAB.register=SAB._register}$globalInfo.SABLoaded=true;